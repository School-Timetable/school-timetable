var Ze=Object.defineProperty;var Fe=(l,e,t)=>e in l?Ze(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var q=(l,e,t)=>(Fe(l,typeof e!="symbol"?e+"":e,t),t);import{S as ne,i as oe,s as ae,k as I,l as V,m as C,h as k,n as w,b as G,R as L,v as Y,d as A,f as J,g as M,T as ge,ad as Ke,q as X,r as $,p as K,ae as Z,W as S,u as be,Y as he,y as x,z as ee,A as te,B as le,a as U,c as z,_ as Q,Q as me,o as Qe,am as ve,V as Ye,w as Je}from"../chunks/index.6f3fdfc3.js";import{l as Xe,P as de,E as $e,F as ze,I as xe,f as se,e as re,t as ye,S as pe,G as je,H as we,b as et,d as tt,a as lt}from"../chunks/Offcanvas.svelte_svelte_type_style_lang.5b4fd23b.js";class y{constructor(){q(this,"id","unavailable")}}q(y,"static_id","unavailable");const ce=new Map,fe=new Map,Be=6,Ge=8;class We{constructor(e,t){q(this,"values",[]);q(this,"daysPerWeek");q(this,"hoursPerDay");q(this,"subjectsMap",new Map);this.daysPerWeek=e,this.hoursPerDay=t;for(let s=0;s<e;s++){this.values.push([]);for(let r=0;r<t;r++)this.values[s].push(null)}}getSubjectOn(e,t){if(!this.isValidTimeslot(e,t))throw new Error("Invalid timeslot");return this.values[e][t]}setSubjectOn(e,t,s){if(!this.isValidTimeslot(e,t))throw new Error("Invalid timeslot");const r=this.values[e][t];this.values[e][t]=s,this.updateSubjectsMap(e,t,s,r)}updateSubjectsMap(e,t,s,r){if(r!=null){const n=this.subjectsMap.get(r.id),m=n.findIndex(a=>a.dayOfWeek==e&&a.timeOfDay==t);n.splice(m,1)}if(s!=null){this.subjectsMap.has(s.id)||this.subjectsMap.set(s.id,[]);const n=this.subjectsMap.get(s.id);n.push({dayOfWeek:e,timeOfDay:t}),this.sortTimeSlots(n)}}computeSubjectMap(){return this.subjectsMap}sortTimeSlots(e){e.sort((t,s)=>t.dayOfWeek!=s.dayOfWeek?t.dayOfWeek-s.dayOfWeek:t.timeOfDay-s.timeOfDay)}isAvailableOn(e,t){var r;return(((r=this.getSubjectOn(e,t))==null?void 0:r.constructor.name)??"")!=y.name}isUnavailableOn(e,t){return!this.isAvailableOn(e,t)}isAssignedOn(e,t){const s=this.getSubjectOn(e,t);return s!=null&&s.constructor.name!==y.name}isUnassignedOn(e,t){return this.getSubjectOn(e,t)==null}isValidTimeslot(e,t){return 0<=e&&e<this.daysPerWeek&&0<=t&&t<this.hoursPerDay&&Number.isInteger(e)&&Number.isInteger(t)}clear(){for(let e=0;e<this.daysPerWeek;e++)for(let t=0;t<this.hoursPerDay;t++)this.values[e][t]=null;this.subjectsMap.clear()}removeAllOf(e){const t=this.subjectsMap.get(e.id);if(t!=null){for(const{dayOfWeek:s,timeOfDay:r}of t)this.values[s][r]=null;this.subjectsMap.delete(e.id)}}getTimeSlotsOf(e){return this.subjectsMap.get(e.id)??[]}getCountOf(e){return this.getTimeSlotsOf(e).length}getUnavailableTimeslots(){return this.getTimeSlotsOf(new y)}getUnassignedTimeslots(){const e=[];for(let t=0;t<this.daysPerWeek;t++)for(let s=0;s<this.hoursPerDay;s++)this.isUnassignedOn(t,s)&&e.push({dayOfWeek:t,timeOfDay:s});return e}}function Te(l,e,t){const s=ie(t.schoolClass);ke(l,e,t,s);const r=ue(t.professor);ke(l,e,t,r)}function ke(l,e,t,s){const r=s.getSubjectOn(l,e);if((r==null?void 0:r.constructor.name)==y.name)throw new Error("Trying to assign a subject on an unavailable timeslot");r!=null&&_e(l,e,r),s.setSubjectOn(l,e,t)}function _e(l,e,t){var n,m;if(t.constructor.name==y.name)throw new Error("Trying to remove an unavailable subject");const s=ie(t.schoolClass),r=ue(t.professor);if(((n=s.getSubjectOn(l,e))==null?void 0:n.id)!=t.id||((m=r.getSubjectOn(l,e))==null?void 0:m.id)!=t.id)throw new Error("Trying to remove a subject from a timeslot that doesn't contain it");s.setSubjectOn(l,e,null),r.setSubjectOn(l,e,null)}function Se(l,e,t,s=!1){const r=Re(t),n=r.getSubjectOn(l,e);if(s){if((n==null?void 0:n.constructor.name)!=y.name)return}else if(r.isAssignedOn(l,e))throw new Error("Trying to set unavailable on an assigned timeslot");const m=s?null:new y;r.setSubjectOn(l,e,m)}function ie(l){const e=l.id;return ce.has(e)||ce.set(e,new We(Be,Ge)),ce.get(e)}function ue(l){const e=l.id;return fe.has(e)||fe.set(e,new We(Be,Ge)),fe.get(e)}function Re(l){if(l instanceof Xe)return ie(l);if(l instanceof de)return ue(l);throw new Error("entity is not a SchoolClass or a Professor")}function st(l){let e,t=(l[9](l[2])||"")+"",s,r,n,m;return{c(){e=I("section"),s=X(t),this.h()},l(a){e=V(a,"SECTION",{class:!0,style:!0,draggable:!0,id:!0});var i=C(e);s=$(i,t),i.forEach(k),this.h()},h(){w(e,"class","btn hourItem svelte-xnyhct"),K(e,"user-select","none"),w(e,"draggable",r=l[2]!=null&&l[1]),w(e,"id",l[0]),Z(e,"highlight",l[5]),Z(e,"disabled",!l[1]),K(e,"background-color",l[3])},m(a,i){G(a,e,i),S(e,s),n||(m=[L(e,"dragend",l[11]),L(e,"dragleave",l[14]),L(e,"dragenter",l[15]),L(e,"dragstart",l[16]),L(e,"dragover",l[17])],n=!0)},p(a,i){i&4&&t!==(t=(a[9](a[2])||"")+"")&&be(s,t),i&6&&r!==(r=a[2]!=null&&a[1])&&w(e,"draggable",r),i&1&&w(e,"id",a[0]),i&32&&Z(e,"highlight",a[5]),i&2&&Z(e,"disabled",!a[1]),i&8&&K(e,"background-color",a[3])},i:he,o:he,d(a){a&&k(e),n=!1,ge(m)}}}function rt(l){let e,t;return e=new xe({props:{style:"font-size: 30px;",name:"x"}}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,r){te(e,s,r),t=!0},p:he,i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){le(e,s)}}}function nt(l){let e,t,s,r,n,m;const a=[rt,st],i=[];function b(c,g){return c[2]instanceof y||c[4]?0:1}return t=b(l),s=i[t]=a[t](l),{c(){e=I("div"),s.c(),this.h()},l(c){e=V(c,"DIV",{class:!0});var g=C(e);s.l(g),g.forEach(k),this.h()},h(){w(e,"class","text-wrap align-middle hour text-center svelte-xnyhct")},m(c,g){G(c,e,g),i[t].m(e,null),r=!0,n||(m=[L(e,"drop",l[18]),L(e,"click",l[10])],n=!0)},p(c,[g]){let v=t;t=b(c),t===v?i[t].p(c,g):(Y(),A(i[v],1,1,()=>{i[v]=null}),J(),s=i[t],s?s.p(c,g):(s=i[t]=a[t](c),s.c()),M(s,1),s.m(e,null))},i(c){r||(M(s),r=!0)},o(c){A(s),r=!1},d(c){c&&k(e),i[t].d(),n=!1,ge(m)}}}function ot(l,e,t){const s=Ke();let{id:r}=e,{draggable:n=!0}=e,{droppable:m=!0}=e,a=!1,{subject:i}=e,{color:b="transparent"}=e,{isProfessorView:c=!1}=e,{unavailable:g=!1}=e;function v(p){m&&p.preventDefault()}function f(p){p.dataTransfer.setData("subject",$e(i)),p.dataTransfer.setData("id",p.target.id),s("hourDrag",i)}function o(p){p.preventDefault();let N=ze(p.dataTransfer.getData("subject"));s("hourDrop",{subject:N,id:p.dataTransfer.getData("id")}),t(5,a=!1)}function h(p){if(p)return c?`${p.schoolClass} - ${p.abbreviation}`:`${p.professor.name} ${p.professor.surname} - ${p.abbreviation}`}function u(){s("click")}function D(){s("dragend")}const T=()=>t(5,a=!1),d=()=>t(5,a=n),H=p=>f(p),B=p=>v(p),j=p=>o(p);return l.$$set=p=>{"id"in p&&t(0,r=p.id),"draggable"in p&&t(1,n=p.draggable),"droppable"in p&&t(12,m=p.droppable),"subject"in p&&t(2,i=p.subject),"color"in p&&t(3,b=p.color),"isProfessorView"in p&&t(13,c=p.isProfessorView),"unavailable"in p&&t(4,g=p.unavailable)},[r,n,i,b,g,a,v,f,o,h,u,D,m,c,T,d,H,B,j]}class qe extends ne{constructor(e){super(),oe(this,e,ot,nt,ae,{id:0,draggable:1,droppable:12,subject:2,color:3,isProfessorView:13,unavailable:4})}}const De=["#fa968e","#79c9f7","#88f28d","#f0ce78","#f2a477","#c57ff0"],Ee=["#540d10","#2a6587","#2e6e31","#a17b1d","#8f461d","#451c5e"];function Ie(l,e,t){const s=l.slice();return s[25]=e[t],s[27]=t,s}function Ve(l,e,t){const s=l.slice();return s[25]=e[t],s[29]=t,s}function Ce(l,e,t){const s=l.slice();return s[25]=e[t],s[29]=t,s}function Pe(l){let e,t,s,r,n,m;function a(){return l[19](l[29])}return{c(){e=I("th"),t=I("input"),r=U(),this.h()},l(i){e=V(i,"TH",{class:!0});var b=C(e);t=V(b,"INPUT",{id:!0,type:!0,class:!0}),r=z(b),b.forEach(k),this.h()},h(){w(t,"id","day_label_"+l[29]),w(t,"type","text"),w(t,"class","input_text svelte-1dzj1ao"),t.value=s=l[6][l[29]]?l[6][l[29]].label:l[12](l[29]),w(e,"class","col-2 svelte-1dzj1ao")},m(i,b){G(i,e,b),S(e,t),S(e,r),n||(m=L(t,"input",a),n=!0)},p(i,b){l=i,b&64&&s!==(s=l[6][l[29]]?l[6][l[29]].label:l[12](l[29]))&&t.value!==s&&(t.value=s)},d(i){i&&k(e),n=!1,m()}}}function Oe(l){let e,t,s;function r(){return l[21](l[29],l[27])}function n(){return l[22](l[29],l[27])}function m(...a){return l[23](l[27],l[29],...a)}return t=new qe({props:{unavailable:l[4]!==null&&l[4].values[l[29]][l[27]]instanceof y,isProfessorView:l[1],color:l[11](l[0].getSubjectOn(l[29],l[27])),id:`${l[27]},${l[29]}`,subject:l[0].values[l[29]][l[27]]}}),t.$on("hourDrag",r),t.$on("dragend",l[3]),t.$on("click",n),t.$on("hourDrop",m),{c(){e=I("td"),x(t.$$.fragment),this.h()},l(a){e=V(a,"TD",{class:!0});var i=C(e);ee(t.$$.fragment,i),i.forEach(k),this.h()},h(){w(e,"class","svelte-1dzj1ao")},m(a,i){G(a,e,i),te(t,e,null),s=!0},p(a,i){l=a;const b={};i&16&&(b.unavailable=l[4]!==null&&l[4].values[l[29]][l[27]]instanceof y),i&2&&(b.isProfessorView=l[1]),i&1&&(b.color=l[11](l[0].getSubjectOn(l[29],l[27]))),i&1&&(b.subject=l[0].values[l[29]][l[27]]),t.$set(b)},i(a){s||(M(t.$$.fragment,a),s=!0)},o(a){A(t.$$.fragment,a),s=!1},d(a){a&&k(e),le(t)}}}function Me(l){let e,t,s,r,n,m,a,i;function b(){return l[20](l[27])}let c={length:l[8]},g=[];for(let f=0;f<c.length;f+=1)g[f]=Oe(Ve(l,c,f));const v=f=>A(g[f],1,1,()=>{g[f]=null});return{c(){e=I("tr"),t=I("input"),r=U();for(let f=0;f<g.length;f+=1)g[f].c();n=U(),this.h()},l(f){e=V(f,"TR",{class:!0});var o=C(e);t=V(o,"INPUT",{style:!0,id:!0,type:!0,class:!0}),r=z(o);for(let h=0;h<g.length;h+=1)g[h].l(o);n=z(o),o.forEach(k),this.h()},h(){K(t,"min-width","70px"),w(t,"id","hour_label_"+l[27]),w(t,"type","text"),w(t,"class","input_text svelte-1dzj1ao"),t.value=s=l[5][l[27]]?l[5][l[27]].label:l[14](l[27]),w(e,"class","svelte-1dzj1ao")},m(f,o){G(f,e,o),S(e,t),S(e,r);for(let h=0;h<g.length;h+=1)g[h]&&g[h].m(e,null);S(e,n),m=!0,a||(i=L(t,"input",b),a=!0)},p(f,o){if(l=f,(!m||o&32&&s!==(s=l[5][l[27]]?l[5][l[27]].label:l[14](l[27]))&&t.value!==s)&&(t.value=s),o&3615){c={length:l[8]};let h;for(h=0;h<c.length;h+=1){const u=Ve(l,c,h);g[h]?(g[h].p(u,o),M(g[h],1)):(g[h]=Oe(u),g[h].c(),M(g[h],1),g[h].m(e,n))}for(Y(),h=c.length;h<g.length;h+=1)v(h);J()}},i(f){if(!m){for(let o=0;o<c.length;o+=1)M(g[o]);m=!0}},o(f){g=g.filter(Boolean);for(let o=0;o<g.length;o+=1)A(g[o]);m=!1},d(f){f&&k(e),Q(g,f),a=!1,i()}}}function at(l){let e,t,s,r,n,m,a,i,b={length:l[8]},c=[];for(let o=0;o<b.length;o+=1)c[o]=Pe(Ce(l,b,o));let g={length:l[7]},v=[];for(let o=0;o<g.length;o+=1)v[o]=Me(Ie(l,g,o));const f=o=>A(v[o],1,1,()=>{v[o]=null});return{c(){e=I("div"),t=I("table"),s=I("thead"),r=I("tr"),n=I("th"),m=U();for(let o=0;o<c.length;o+=1)c[o].c();a=U();for(let o=0;o<v.length;o+=1)v[o].c();this.h()},l(o){e=V(o,"DIV",{class:!0,style:!0});var h=C(e);t=V(h,"TABLE",{});var u=C(t);s=V(u,"THEAD",{});var D=C(s);r=V(D,"TR",{class:!0});var T=C(r);n=V(T,"TH",{class:!0}),C(n).forEach(k),m=z(T);for(let d=0;d<c.length;d+=1)c[d].l(T);T.forEach(k),D.forEach(k),a=z(u);for(let d=0;d<v.length;d+=1)v[d].l(u);u.forEach(k),h.forEach(k),this.h()},h(){w(n,"class","col-2 svelte-1dzj1ao"),w(r,"class","svelte-1dzj1ao"),w(e,"class","w-100"),K(e,"overflow","auto")},m(o,h){G(o,e,h),S(e,t),S(t,s),S(s,r),S(r,n),S(r,m);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(r,null);S(t,a);for(let u=0;u<v.length;u+=1)v[u]&&v[u].m(t,null);i=!0},p(o,[h]){if(h&12352){b={length:o[8]};let u;for(u=0;u<b.length;u+=1){const D=Ce(o,b,u);c[u]?c[u].p(D,h):(c[u]=Pe(D),c[u].c(),c[u].m(r,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=b.length}if(h&53055){g={length:o[7]};let u;for(u=0;u<g.length;u+=1){const D=Ie(o,g,u);v[u]?(v[u].p(D,h),M(v[u],1)):(v[u]=Me(D),v[u].c(),M(v[u],1),v[u].m(t,null))}for(Y(),u=g.length;u<v.length;u+=1)f(u);J()}},i(o){if(!i){for(let h=0;h<g.length;h+=1)M(v[h]);i=!0}},o(o){v=v.filter(Boolean);for(let h=0;h<v.length;h+=1)A(v[h]);i=!1},d(o){o&&k(e),Q(c,o),Q(v,o)}}}function it(){}function ut(l,e,t){let s,r;me(l,se,_=>t(5,s=_)),me(l,re,_=>t(6,r=_));let{timeTable:n}=e,{professorView:m}=e,{selectedItem:a}=e,{subjectColors:i=new Map}=e,{callback:b}=e,c=null,g=n.hoursPerDay,v=n.daysPerWeek;ye.subscribe(_=>{t(0,n)});function f(_){_ instanceof pe&&(t(4,c=Re(m?_.schoolClass:_.professor)),console.log("POG",c.values))}function o(){t(4,c=null),console.log("UNPOG")}function h(_,E){const P=n.getSubjectOn(_,E);P instanceof y?Se(_,E,a,!0):P==null&&Se(_,E,a,!1),t(0,n)}function u(_,E,P){const F=n.getSubjectOn(E,_);Te(E,_,P.subject),o();const W=P.id.split(",");W.length==2&&(_e(Number.parseInt(W[1]),Number.parseInt(W[0]),P.subject),F instanceof pe&&Te(Number.parseInt(W[1]),Number.parseInt(W[0]),F)),b(),t(0,n)}function D(_){return _==null||_ instanceof y?"transparent":i.get(_.id)}function T(_){let E="day "+(_+1);return re.update(P=>(P[_]=je.of(_,E),P)),E}function d(_){let E=document.getElementById("day_label_"+_),P=E.value;P.match(/^[a-zA-Z0-9_\sì]*$/)?(ve(re,r[_]=je.of(_,P),r),re.set,console.log(r)):r[_]?E.value=r[_].label:E.value="day_"+(_+1)}function H(_){let E="hour "+(_+1);return se.update(P=>(P[_]=we.of(_,E),P)),E}function B(_){let E=document.getElementById("hour_label_"+_),P=E.value;P.match(/^[a-zA-Z0-9_\:/\s]*$/)?(ve(se,s[_]=we.of(_,P),s),se.set,console.log(s)):s[_]?E.value=s[_].label:E.value="hour_"+(_+1)}Qe(it);const j=_=>d(_),p=_=>B(_),N=(_,E)=>f(n.values[_][E]),O=(_,E)=>h(_,E),R=(_,E,P)=>u(_,E,P.detail);return l.$$set=_=>{"timeTable"in _&&t(0,n=_.timeTable),"professorView"in _&&t(1,m=_.professorView),"selectedItem"in _&&t(16,a=_.selectedItem),"subjectColors"in _&&t(17,i=_.subjectColors),"callback"in _&&t(18,b=_.callback)},[n,m,f,o,c,s,r,g,v,h,u,D,T,d,H,B,a,i,b,j,p,N,O,R]}class ct extends ne{constructor(e){super(),oe(this,e,ut,at,ae,{timeTable:0,professorView:1,selectedItem:16,subjectColors:17,callback:18,onSubjectDrag:2,onSubjectDragEnd:3})}get onSubjectDrag(){return this.$$.ctx[2]}get onSubjectDragEnd(){return this.$$.ctx[3]}}function Ne(l,e,t){const s=l.slice();return s[17]=e[t],s[19]=t,s}function Ae(l){let e,t,s,r,n,m=l[17].hoursPerWeek.value-l[1].getCountOf(l[17])+"",a,i,b;function c(){return l[10](l[17])}return s=new qe({props:{isProfessorView:l[2],color:l[8](l[17]),droppable:!1,draggable:l[9](l[17])>0,id:"prova",subject:l[17]}}),s.$on("hourDrag",c),s.$on("dragend",function(){Ye(l[6].onSubjectDragEnd)&&l[6].onSubjectDragEnd.apply(this,arguments)}),s.$on("hourDrop",dt),{c(){e=I("li"),t=I("div"),x(s.$$.fragment),r=U(),n=I("span"),a=X(m),i=U(),this.h()},l(g){e=V(g,"LI",{class:!0});var v=C(e);t=V(v,"DIV",{class:!0});var f=C(t);ee(s.$$.fragment,f),f.forEach(k),r=z(v),n=V(v,"SPAN",{class:!0});var o=C(n);a=$(o,m),o.forEach(k),i=z(v),v.forEach(k),this.h()},h(){w(t,"class","w-100"),w(n,"class","badge bg-primary rounded-pill ms-2"),w(e,"class","list-group-item d-flex justify-content-between align-items-center")},m(g,v){G(g,e,v),S(e,t),te(s,t,null),S(e,r),S(e,n),S(n,a),S(e,i),b=!0},p(g,v){l=g;const f={};v&4&&(f.isProfessorView=l[2]),v&1&&(f.color=l[8](l[17])),v&1&&(f.draggable=l[9](l[17])>0),v&1&&(f.subject=l[17]),s.$set(f),(!b||v&3)&&m!==(m=l[17].hoursPerWeek.value-l[1].getCountOf(l[17])+"")&&be(a,m)},i(g){b||(M(s.$$.fragment,g),b=!0)},o(g){A(s.$$.fragment,g),b=!1},d(g){g&&k(e),le(s)}}}function ft(l){let e,t,s,r,n,m,a,i,b,c,g,v,f,o,h,u,D,T=l[0],d=[];for(let j=0;j<T.length;j+=1)d[j]=Ae(Ne(l,T,j));const H=j=>A(d[j],1,1,()=>{d[j]=null});let B={timeTable:l[1],professorView:l[2],selectedItem:l[3],subjectColors:l[4],callback:l[5]};return c=new ct({props:B}),l[12](c),{c(){e=I("head"),t=I("link"),s=U(),r=I("div"),n=I("div"),m=I("div"),a=I("ul");for(let j=0;j<d.length;j+=1)d[j].c();i=U(),b=I("div"),x(c.$$.fragment),g=U(),v=I("div"),f=I("button"),o=X("valida orario"),this.h()},l(j){e=V(j,"HEAD",{});var p=C(e);t=V(p,"LINK",{rel:!0,href:!0}),p.forEach(k),s=z(j),r=V(j,"DIV",{class:!0});var N=C(r);n=V(N,"DIV",{class:!0});var O=C(n);m=V(O,"DIV",{class:!0});var R=C(m);a=V(R,"UL",{class:!0});var _=C(a);for(let W=0;W<d.length;W+=1)d[W].l(_);_.forEach(k),R.forEach(k),i=z(O),b=V(O,"DIV",{class:!0});var E=C(b);ee(c.$$.fragment,E),g=z(E),v=V(E,"DIV",{class:!0});var P=C(v);f=V(P,"BUTTON",{type:!0,class:!0});var F=C(f);o=$(F,"valida orario"),F.forEach(k),P.forEach(k),E.forEach(k),O.forEach(k),N.forEach(k),this.h()},h(){w(t,"rel","stylesheet"),w(t,"href","https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"),w(a,"class","list-group me-1"),w(m,"class","overflow-auto vh-100 row col-2"),w(f,"type","button"),w(f,"class","btn btn-primary btn-lg w-100"),w(v,"class","d-flex justify-content-center my-4"),w(b,"class","col-10"),w(n,"class","d-flex"),w(r,"class","container-fluid")},m(j,p){G(j,e,p),S(e,t),G(j,s,p),G(j,r,p),S(r,n),S(n,m),S(m,a);for(let N=0;N<d.length;N+=1)d[N]&&d[N].m(a,null);S(n,i),S(n,b),te(c,b,null),S(b,g),S(b,v),S(v,f),S(f,o),h=!0,u||(D=[L(a,"dragover",gt),L(a,"drop",l[11]),L(f,"click",l[13])],u=!0)},p(j,[p]){if(p&839){T=j[0];let O;for(O=0;O<T.length;O+=1){const R=Ne(j,T,O);d[O]?(d[O].p(R,p),M(d[O],1)):(d[O]=Ae(R),d[O].c(),M(d[O],1),d[O].m(a,null))}for(Y(),O=T.length;O<d.length;O+=1)H(O);J()}const N={};p&2&&(N.timeTable=j[1]),p&4&&(N.professorView=j[2]),p&8&&(N.selectedItem=j[3]),p&16&&(N.subjectColors=j[4]),c.$set(N)},i(j){if(!h){for(let p=0;p<T.length;p+=1)M(d[p]);M(c.$$.fragment,j),h=!0}},o(j){d=d.filter(Boolean);for(let p=0;p<d.length;p+=1)A(d[p]);A(c.$$.fragment,j),h=!1},d(j){j&&k(e),j&&k(s),j&&k(r),Q(d,j),l[12](null),le(c),u=!1,ge(D)}}}function ht(){alert("Work in progess...")}const dt=l=>{},gt=l=>l.preventDefault();function bt(l,e,t){let{grid:s}=e,{sidebar:r}=e,{professorView:n}=e,{selectedItem:m}=e,a,i=De,{subjectColors:b=new Map}=e;const c=()=>{let d=0;b.clear(),r.forEach(H=>b.set(H.id,i[d++%i.length]))};ye.subscribe(d=>{d=="light"?i=De:(d=="dark",i=Ee);let H=0;b.clear(),r.forEach(B=>b.set(B.id,i[H++%i.length])),o()});function g(d){const H=ze(d.dataTransfer.getData("subject")),j=d.dataTransfer.getData("id").split(",");_e(Number.parseInt(j[1]),Number.parseInt(j[0]),H),t(1,s),t(0,r)}function v(d){return d==null||d instanceof y?"transparent":b.get(d.id)}function f(d){return d.hoursPerWeek.value-s.getCountOf(d)}function o(){t(0,r)}const h=d=>a.onSubjectDrag(d),u=d=>g(d);function D(d){Je[d?"unshift":"push"](()=>{a=d,t(6,a)})}const T=d=>ht();return l.$$set=d=>{"grid"in d&&t(1,s=d.grid),"sidebar"in d&&t(0,r=d.sidebar),"professorView"in d&&t(2,n=d.professorView),"selectedItem"in d&&t(3,m=d.selectedItem),"subjectColors"in d&&t(4,b=d.subjectColors)},l.$$.update=()=>{l.$$.dirty&1&&r&&c()},[r,s,n,m,b,o,a,g,v,f,h,u,D,T]}class _t extends ne{constructor(e){super(),oe(this,e,bt,ft,ae,{grid:1,sidebar:0,professorView:2,selectedItem:3,subjectColors:4,refresh:5})}get refresh(){return this.$$.ctx[5]}}function He(l,e,t){const s=l.slice();return s[10]=e[t],s}function Le(l){let e,t,s=l[10].toString()+"",r,n,m,a;function i(){return l[8](l[10])}return{c(){e=I("li"),t=I("a"),r=X(s),n=U(),this.h()},l(b){e=V(b,"LI",{class:!0});var c=C(e);t=V(c,"A",{class:!0,href:!0});var g=C(t);r=$(g,s),g.forEach(k),n=z(c),c.forEach(k),this.h()},h(){w(t,"class","nav-link"),w(t,"href","#"),Z(t,"active",l[10]==l[1]),w(e,"class","nav-item")},m(b,c){G(b,e,c),S(e,t),S(t,r),S(e,n),m||(a=L(t,"click",i),m=!0)},p(b,c){l=b,c&25&&s!==(s=l[10].toString()+"")&&be(r,s),c&27&&Z(t,"active",l[10]==l[1])},d(b){b&&k(e),m=!1,a()}}}function Ue(l){let e,t;return e=new _t({props:{selectedItem:l[1],professorView:l[0],grid:l[2],sidebar:l[5]}}),{c(){x(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,r){te(e,s,r),t=!0},p(s,r){const n={};r&2&&(n.selectedItem=s[1]),r&1&&(n.professorView=s[0]),r&4&&(n.grid=s[2]),r&32&&(n.sidebar=s[5]),e.$set(n)},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){le(e,s)}}}function mt(l){let e,t,s,r,n,m,a,i,b,c,g,v,f=l[0]?l[4]:l[3],o=[];for(let u=0;u<f.length;u+=1)o[u]=Le(He(l,f,u));let h=l[2]&&l[1]&&Ue(l);return{c(){e=I("div"),t=I("div"),s=I("input"),r=U(),n=I("label"),m=X("Professor View"),a=U(),i=I("ul");for(let u=0;u<o.length;u+=1)o[u].c();b=U(),h&&h.c(),this.h()},l(u){e=V(u,"DIV",{class:!0});var D=C(e);t=V(D,"DIV",{class:!0});var T=C(t);s=V(T,"INPUT",{class:!0,type:!0,id:!0}),r=z(T),n=V(T,"LABEL",{class:!0,for:!0});var d=C(n);m=$(d,"Professor View"),d.forEach(k),T.forEach(k),a=z(D),i=V(D,"UL",{class:!0});var H=C(i);for(let B=0;B<o.length;B+=1)o[B].l(H);H.forEach(k),b=z(D),h&&h.l(D),D.forEach(k),this.h()},h(){w(s,"class","form-check-input"),w(s,"type","checkbox"),w(s,"id","flexSwitchCheckChecked"),s.checked=l[0],w(n,"class","form-check-label"),w(n,"for","flexSwitchCheckChecked"),w(t,"class","form-check form-switch"),w(i,"class","nav nav-tabs"),w(e,"class","m-3")},m(u,D){G(u,e,D),S(e,t),S(t,s),S(t,r),S(t,n),S(n,m),S(e,a),S(e,i);for(let T=0;T<o.length;T+=1)o[T]&&o[T].m(i,null);S(e,b),h&&h.m(e,null),c=!0,g||(v=L(s,"click",l[7]),g=!0)},p(u,[D]){if((!c||D&1)&&(s.checked=u[0]),D&91){f=u[0]?u[4]:u[3];let T;for(T=0;T<f.length;T+=1){const d=He(u,f,T);o[T]?o[T].p(d,D):(o[T]=Le(d),o[T].c(),o[T].m(i,null))}for(;T<o.length;T+=1)o[T].d(1);o.length=f.length}u[2]&&u[1]?h?(h.p(u,D),D&6&&M(h,1)):(h=Ue(u),h.c(),M(h,1),h.m(e,null)):h&&(Y(),A(h,1,1,()=>{h=null}),J())},i(u){c||(M(h),c=!0)},o(u){A(h),c=!1},d(u){u&&k(e),Q(o,u),h&&h.d(),g=!1,v()}}}function vt(l,e,t){let s=[],r=[],n=[],m=[];et.subscribe(f=>t(3,r=f)),tt.subscribe(f=>{s=f});let{professorView:a=!1}=e,{selectedItem:i=null}=e,{currentTimeTable:b=null}=e;lt.subscribe(f=>{t(4,n=f)});function c(f){let o=f instanceof de?ue(f):ie(f);t(2,b=o),t(1,i=f),f instanceof de?t(5,m=s.filter(h=>h.professor.id==f.id)):t(5,m=s.filter(h=>h.schoolClass.id==f.id))}function g(){t(0,a=!a),c(a?n[0]:r[0])}const v=f=>c(f);return l.$$set=f=>{"professorView"in f&&t(0,a=f.professorView),"selectedItem"in f&&t(1,i=f.selectedItem),"currentTimeTable"in f&&t(2,b=f.currentTimeTable)},[a,i,b,r,n,m,c,g,v]}class Tt extends ne{constructor(e){super(),oe(this,e,vt,mt,ae,{professorView:0,selectedItem:1,currentTimeTable:2})}}export{Tt as component};
