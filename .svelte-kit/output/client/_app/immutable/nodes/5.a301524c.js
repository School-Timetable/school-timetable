var xe=Object.defineProperty;var et=(s,e,t)=>e in s?xe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var te=(s,e,t)=>(et(s,typeof e!="symbol"?e+"":e,t),t);import{S as $,i as x,s as ee,I as z,k as S,l as I,m as C,h as g,b as N,K as F,L as G,M as q,g as E,d as P,D as je,e as he,v as le,f as se,n as w,G as K,J as ae,W as D,N as we,C as ie,H as Ee,y as Q,z as X,A as Z,B as y,a as L,c as B,_ as fe,p as ce,R,Y as Se,ad as tt,q as re,r as ne,ae as oe,u as _e,T as We}from"../chunks/index.bdfd860f.js";import{l as lt,P as Te,c as Qe,E as st,F as Xe,S as Ie,b as rt,d as nt,a as ot}from"../chunks/Offcanvas.svelte_svelte_type_style_lang.615f0571.js";class A{constructor(){te(this,"id","unavailable")}}te(A,"static_id","unavailable");const ve=new Map,pe=new Map,ue=6,de=8;class Ze{constructor(e,t){te(this,"values",[]);te(this,"daysPerWeek");te(this,"hoursPerDay");te(this,"subjectsMap",new Map);this.daysPerWeek=e,this.hoursPerDay=t;for(let l=0;l<e;l++){this.values.push([]);for(let r=0;r<t;r++)this.values[l].push(null)}}getSubjectOn(e,t){if(!this.isValidTimeslot(e,t))throw new Error("Invalid timeslot");return this.values[e][t]}setSubjectOn(e,t,l){if(!this.isValidTimeslot(e,t))throw new Error("Invalid timeslot");const r=this.values[e][t];this.values[e][t]=l,this.updateSubjectsMap(e,t,l,r)}updateSubjectsMap(e,t,l,r){if(r!=null){const n=this.subjectsMap.get(r.id),i=n.findIndex(o=>o.dayOfWeek==e&&o.timeOfDay==t);n.splice(i,1)}if(l!=null){this.subjectsMap.has(l.id)||this.subjectsMap.set(l.id,[]);const n=this.subjectsMap.get(l.id);n.push({dayOfWeek:e,timeOfDay:t}),this.sortTimeSlots(n)}}computeSubjectMap(){return this.subjectsMap}sortTimeSlots(e){e.sort((t,l)=>t.dayOfWeek!=l.dayOfWeek?t.dayOfWeek-l.dayOfWeek:t.timeOfDay-l.timeOfDay)}isAvailableOn(e,t){var r;return(((r=this.getSubjectOn(e,t))==null?void 0:r.constructor.name)??"")!=A.name}isUnavailableOn(e,t){return!this.isAvailableOn(e,t)}isAssignedOn(e,t){const l=this.getSubjectOn(e,t);return l!=null&&l.constructor.name!==A.name}isUnassignedOn(e,t){return this.getSubjectOn(e,t)==null}isValidTimeslot(e,t){return 0<=e&&e<this.daysPerWeek&&0<=t&&t<this.hoursPerDay&&Number.isInteger(e)&&Number.isInteger(t)}clear(){for(let e=0;e<this.daysPerWeek;e++)for(let t=0;t<this.hoursPerDay;t++)this.values[e][t]=null;this.subjectsMap.clear()}removeAllOf(e){const t=this.subjectsMap.get(e.id);if(t!=null){for(const{dayOfWeek:l,timeOfDay:r}of t)this.values[l][r]=null;this.subjectsMap.delete(e.id)}}getTimeSlotsOf(e){return this.subjectsMap.get(e.id)??[]}getCountOf(e){return this.getTimeSlotsOf(e).length}getUnavailableTimeslots(){return this.getTimeSlotsOf(new A)}getUnassignedTimeslots(){const e=[];for(let t=0;t<this.daysPerWeek;t++)for(let l=0;l<this.hoursPerDay;l++)this.isUnassignedOn(t,l)&&e.push({dayOfWeek:t,timeOfDay:l});return e}}function De(s,e,t){const l=ge(t.schoolClass);Ve(s,e,t,l);const r=be(t.professor);Ve(s,e,t,r)}function Ve(s,e,t,l){const r=l.getSubjectOn(s,e);if((r==null?void 0:r.constructor.name)==A.name)throw new Error("Trying to assign a subject on an unavailable timeslot");r!=null&&ke(s,e,r),l.setSubjectOn(s,e,t)}function ke(s,e,t){var n,i;if(t.constructor.name==A.name)throw new Error("Trying to remove an unavailable subject");const l=ge(t.schoolClass),r=be(t.professor);if(((n=l.getSubjectOn(s,e))==null?void 0:n.id)!=t.id||((i=r.getSubjectOn(s,e))==null?void 0:i.id)!=t.id)throw new Error("Trying to remove a subject from a timeslot that doesn't contain it");l.setSubjectOn(s,e,null),r.setSubjectOn(s,e,null)}function Ce(s,e,t,l=!1){const r=ye(t),n=r.getSubjectOn(s,e);if(l){if((n==null?void 0:n.constructor.name)!=A.name)return}else if(r.isAssignedOn(s,e))throw new Error("Trying to set unavailable on an assigned timeslot");const i=l?null:new A;r.setSubjectOn(s,e,i)}function ge(s){const e=s.id;return ve.has(e)||ve.set(e,new Ze(ue,de)),ve.get(e)}function be(s){const e=s.id;return pe.has(e)||pe.set(e,new Ze(ue,de)),pe.get(e)}function ye(s){if(s instanceof lt)return ge(s);if(s instanceof Te)return be(s);throw new Error("entity is not a SchoolClass or a Professor")}function at(s){let e,t;const l=s[1].default,r=z(l,s,s[0],null);return{c(){e=S("colgroup"),r&&r.c()},l(n){e=I(n,"COLGROUP",{});var i=C(e);r&&r.l(i),i.forEach(g)},m(n,i){N(n,e,i),r&&r.m(e,null),t=!0},p(n,[i]){r&&r.p&&(!t||i&1)&&F(r,l,n,n[0],t?q(l,n[0],i,null):G(n[0]),null)},i(n){t||(E(r,n),t=!0)},o(n){P(r,n),t=!1},d(n){n&&g(e),r&&r.d(n)}}}function it(s,e,t){let{$$slots:l={},$$scope:r}=e;return je("colgroup",!0),s.$$set=n=>{"$$scope"in n&&t(0,r=n.$$scope)},[r,l]}class ft extends ${constructor(e){super(),x(this,e,it,at,ee,{})}}function ut(s){let e;const t=s[4].default,l=z(t,s,s[3],null);return{c(){l&&l.c()},l(r){l&&l.l(r)},m(r,n){l&&l.m(r,n),e=!0},p(r,n){l&&l.p&&(!e||n&8)&&F(l,t,r,r[3],e?q(t,r[3],n,null):G(r[3]),null)},i(r){e||(E(l,r),e=!0)},o(r){P(l,r),e=!1},d(r){l&&l.d(r)}}}function ct(s){let e,t;const l=s[4].default,r=z(l,s,s[3],null);return{c(){e=S("div"),r&&r.c(),this.h()},l(n){e=I(n,"DIV",{class:!0});var i=C(e);r&&r.l(i),i.forEach(g),this.h()},h(){w(e,"class",s[1])},m(n,i){N(n,e,i),r&&r.m(e,null),t=!0},p(n,i){r&&r.p&&(!t||i&8)&&F(r,l,n,n[3],t?q(l,n[3],i,null):G(n[3]),null),(!t||i&2)&&w(e,"class",n[1])},i(n){t||(E(r,n),t=!0)},o(n){P(r,n),t=!1},d(n){n&&g(e),r&&r.d(n)}}}function ht(s){let e,t,l,r;const n=[ct,ut],i=[];function o(a,f){return a[0]?0:1}return e=o(s),t=i[e]=n[e](s),{c(){t.c(),l=he()},l(a){t.l(a),l=he()},m(a,f){i[e].m(a,f),N(a,l,f),r=!0},p(a,[f]){let h=e;e=o(a),e===h?i[e].p(a,f):(le(),P(i[h],1,1,()=>{i[h]=null}),se(),t=i[e],t?t.p(a,f):(t=i[e]=n[e](a),t.c()),E(t,1),t.m(l.parentNode,l))},i(a){r||(E(t),r=!0)},o(a){P(t),r=!1},d(a){i[e].d(a),a&&g(l)}}}function dt(s,e,t){let l,{$$slots:r={},$$scope:n}=e,{class:i=""}=e,{responsive:o=!1}=e;return s.$$set=a=>{"class"in a&&t(2,i=a.class),"responsive"in a&&t(0,o=a.responsive),"$$scope"in a&&t(3,n=a.$$scope)},s.$$.update=()=>{s.$$.dirty&5&&t(1,l=Qe(i,{"table-responsive":o===!0,[`table-responsive-${o}`]:typeof o=="string"}))},[o,l,i,n,r]}class _t extends ${constructor(e){super(),x(this,e,dt,ht,ee,{class:2,responsive:0})}}function gt(s){let e,t,l;const r=s[2].default,n=z(r,s,s[1],null);let i=[s[0]],o={};for(let a=0;a<i.length;a+=1)o=K(o,i[a]);return{c(){e=S("tfoot"),t=S("tr"),n&&n.c(),this.h()},l(a){e=I(a,"TFOOT",{});var f=C(e);t=I(f,"TR",{});var h=C(t);n&&n.l(h),h.forEach(g),f.forEach(g),this.h()},h(){ae(e,o)},m(a,f){N(a,e,f),D(e,t),n&&n.m(t,null),l=!0},p(a,[f]){n&&n.p&&(!l||f&2)&&F(n,r,a,a[1],l?q(r,a[1],f,null):G(a[1]),null),ae(e,o=we(i,[f&1&&a[0]]))},i(a){l||(E(n,a),l=!0)},o(a){P(n,a),l=!1},d(a){a&&g(e),n&&n.d(a)}}}function bt(s,e,t){const l=[];let r=ie(e,l),{$$slots:n={},$$scope:i}=e;return je("footer",!0),s.$$set=o=>{e=K(K({},e),Ee(o)),t(0,r=ie(e,l)),"$$scope"in o&&t(1,i=o.$$scope)},[r,i,n]}class mt extends ${constructor(e){super(),x(this,e,bt,gt,ee,{})}}function vt(s){let e,t,l;const r=s[2].default,n=z(r,s,s[1],null);let i=[s[0]],o={};for(let a=0;a<i.length;a+=1)o=K(o,i[a]);return{c(){e=S("thead"),t=S("tr"),n&&n.c(),this.h()},l(a){e=I(a,"THEAD",{});var f=C(e);t=I(f,"TR",{});var h=C(t);n&&n.l(h),h.forEach(g),f.forEach(g),this.h()},h(){ae(e,o)},m(a,f){N(a,e,f),D(e,t),n&&n.m(t,null),l=!0},p(a,[f]){n&&n.p&&(!l||f&2)&&F(n,r,a,a[1],l?q(r,a[1],f,null):G(a[1]),null),ae(e,o=we(i,[f&1&&a[0]]))},i(a){l||(E(n,a),l=!0)},o(a){P(n,a),l=!1},d(a){a&&g(e),n&&n.d(a)}}}function pt(s,e,t){const l=[];let r=ie(e,l),{$$slots:n={},$$scope:i}=e;return je("header",!0),s.$$set=o=>{e=K(K({},e),Ee(o)),t(0,r=ie(e,l)),"$$scope"in o&&t(1,i=o.$$scope)},[r,i,n]}class Tt extends ${constructor(e){super(),x(this,e,pt,vt,ee,{})}}function Pe(s,e,t){const l=s.slice();return l[12]=e[t],l}const kt=s=>({row:s&2}),Ne=s=>({row:s[12]}),jt=s=>({row:s&2}),Oe=s=>({row:s[12]});function wt(s){let e;const t=s[10].default,l=z(t,s,s[11],null);return{c(){l&&l.c()},l(r){l&&l.l(r)},m(r,n){l&&l.m(r,n),e=!0},p(r,n){l&&l.p&&(!e||n&2048)&&F(l,t,r,r[11],e?q(t,r[11],n,null):G(r[11]),null)},i(r){e||(E(l,r),e=!0)},o(r){P(l,r),e=!1},d(r){l&&l.d(r)}}}function Et(s){let e,t,l,r,n,i,o,a;e=new ft({props:{$$slots:{default:[St]},$$scope:{ctx:s}}}),l=new Tt({props:{$$slots:{default:[It]},$$scope:{ctx:s}}});let f=s[1],h=[];for(let c=0;c<f.length;c+=1)h[c]=Me(Pe(s,f,c));const d=c=>P(h[c],1,1,()=>{h[c]=null});return o=new mt({props:{$$slots:{default:[Dt]},$$scope:{ctx:s}}}),{c(){Q(e.$$.fragment),t=L(),Q(l.$$.fragment),r=L(),n=S("tbody");for(let c=0;c<h.length;c+=1)h[c].c();i=L(),Q(o.$$.fragment)},l(c){X(e.$$.fragment,c),t=B(c),X(l.$$.fragment,c),r=B(c),n=I(c,"TBODY",{});var u=C(n);for(let _=0;_<h.length;_+=1)h[_].l(u);u.forEach(g),i=B(c),X(o.$$.fragment,c)},m(c,u){Z(e,c,u),N(c,t,u),Z(l,c,u),N(c,r,u),N(c,n,u);for(let _=0;_<h.length;_+=1)h[_]&&h[_].m(n,null);N(c,i,u),Z(o,c,u),a=!0},p(c,u){const _={};u&2048&&(_.$$scope={dirty:u,ctx:c}),e.$set(_);const T={};if(u&2050&&(T.$$scope={dirty:u,ctx:c}),l.$set(T),u&2050){f=c[1];let k;for(k=0;k<f.length;k+=1){const j=Pe(c,f,k);h[k]?(h[k].p(j,u),E(h[k],1)):(h[k]=Me(j),h[k].c(),E(h[k],1),h[k].m(n,null))}for(le(),k=f.length;k<h.length;k+=1)d(k);se()}const b={};u&2048&&(b.$$scope={dirty:u,ctx:c}),o.$set(b)},i(c){if(!a){E(e.$$.fragment,c),E(l.$$.fragment,c);for(let u=0;u<f.length;u+=1)E(h[u]);E(o.$$.fragment,c),a=!0}},o(c){P(e.$$.fragment,c),P(l.$$.fragment,c),h=h.filter(Boolean);for(let u=0;u<h.length;u+=1)P(h[u]);P(o.$$.fragment,c),a=!1},d(c){y(e,c),c&&g(t),y(l,c),c&&g(r),c&&g(n),fe(h,c),c&&g(i),y(o,c)}}}function St(s){let e;const t=s[10].default,l=z(t,s,s[11],null);return{c(){l&&l.c()},l(r){l&&l.l(r)},m(r,n){l&&l.m(r,n),e=!0},p(r,n){l&&l.p&&(!e||n&2048)&&F(l,t,r,r[11],e?q(t,r[11],n,null):G(r[11]),null)},i(r){e||(E(l,r),e=!0)},o(r){P(l,r),e=!1},d(r){l&&l.d(r)}}}function It(s){let e;const t=s[10].default,l=z(t,s,s[11],Oe);return{c(){l&&l.c()},l(r){l&&l.l(r)},m(r,n){l&&l.m(r,n),e=!0},p(r,n){l&&l.p&&(!e||n&2050)&&F(l,t,r,r[11],e?q(t,r[11],n,jt):G(r[11]),Oe)},i(r){e||(E(l,r),e=!0)},o(r){P(l,r),e=!1},d(r){l&&l.d(r)}}}function Me(s){let e,t,l;const r=s[10].default,n=z(r,s,s[11],Ne);return{c(){e=S("tr"),n&&n.c(),t=L()},l(i){e=I(i,"TR",{});var o=C(e);n&&n.l(o),t=B(o),o.forEach(g)},m(i,o){N(i,e,o),n&&n.m(e,null),D(e,t),l=!0},p(i,o){n&&n.p&&(!l||o&2050)&&F(n,r,i,i[11],l?q(r,i[11],o,kt):G(i[11]),Ne)},i(i){l||(E(n,i),l=!0)},o(i){P(n,i),l=!1},d(i){i&&g(e),n&&n.d(i)}}}function Dt(s){let e;const t=s[10].default,l=z(t,s,s[11],null);return{c(){l&&l.c()},l(r){l&&l.l(r)},m(r,n){l&&l.m(r,n),e=!0},p(r,n){l&&l.p&&(!e||n&2048)&&F(l,t,r,r[11],e?q(t,r[11],n,null):G(r[11]),null)},i(r){e||(E(l,r),e=!0)},o(r){P(l,r),e=!1},d(r){l&&l.d(r)}}}function Vt(s){let e,t,l,r;const n=[Et,wt],i=[];function o(h,d){return h[1]?0:1}t=o(s),l=i[t]=n[t](s);let a=[s[3],{class:s[2]}],f={};for(let h=0;h<a.length;h+=1)f=K(f,a[h]);return{c(){e=S("table"),l.c(),this.h()},l(h){e=I(h,"TABLE",{class:!0});var d=C(e);l.l(d),d.forEach(g),this.h()},h(){ae(e,f)},m(h,d){N(h,e,d),i[t].m(e,null),r=!0},p(h,d){let c=t;t=o(h),t===c?i[t].p(h,d):(le(),P(i[c],1,1,()=>{i[c]=null}),se(),l=i[t],l?l.p(h,d):(l=i[t]=n[t](h),l.c()),E(l,1),l.m(e,null)),ae(e,f=we(a,[d&8&&h[3],(!r||d&4)&&{class:h[2]}]))},i(h){r||(E(l),r=!0)},o(h){P(l),r=!1},d(h){h&&g(e),i[t].d()}}}function Ct(s){let e,t;return e=new _t({props:{responsive:s[0],$$slots:{default:[Vt]},$$scope:{ctx:s}}}),{c(){Q(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,r){Z(e,l,r),t=!0},p(l,[r]){const n={};r&1&&(n.responsive=l[0]),r&2062&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){y(e,l)}}}function Pt(s,e,t){let l;const r=["class","size","bordered","borderless","striped","hover","responsive","rows"];let n=ie(e,r),{$$slots:i={},$$scope:o}=e,{class:a=""}=e,{size:f=""}=e,{bordered:h=!1}=e,{borderless:d=!1}=e,{striped:c=!1}=e,{hover:u=!1}=e,{responsive:_=!1}=e,{rows:T=void 0}=e;return s.$$set=b=>{e=K(K({},e),Ee(b)),t(3,n=ie(e,r)),"class"in b&&t(4,a=b.class),"size"in b&&t(5,f=b.size),"bordered"in b&&t(6,h=b.bordered),"borderless"in b&&t(7,d=b.borderless),"striped"in b&&t(8,c=b.striped),"hover"in b&&t(9,u=b.hover),"responsive"in b&&t(0,_=b.responsive),"rows"in b&&t(1,T=b.rows),"$$scope"in b&&t(11,o=b.$$scope)},s.$$.update=()=>{s.$$.dirty&1008&&t(2,l=Qe(a,"table",f?"table-"+f:!1,h?"table-bordered":!1,d?"table-borderless":!1,c?"table-striped":!1,u?"table-hover":!1))},[_,T,l,n,a,f,h,d,c,u,i,o]}class Nt extends ${constructor(e){super(),x(this,e,Pt,Ct,ee,{class:4,size:5,bordered:6,borderless:7,striped:8,hover:9,responsive:0,rows:1})}}function Ue(s){let e,t=(s[9](s[2])||"")+"",l,r,n,i;return{c(){e=S("section"),l=re(t),this.h()},l(o){e=I(o,"SECTION",{class:!0,style:!0,id:!0,draggable:!0});var a=C(e);l=ne(a,t),a.forEach(g),this.h()},h(){w(e,"class","hourItem svelte-184l6dg"),ce(e,"user-select","none"),w(e,"id",s[0]),w(e,"draggable",r=s[2]!=null&&s[1]),oe(e,"highlight",s[5]),oe(e,"disabled",!s[1]),ce(e,"background-color",s[3])},m(o,a){N(o,e,a),D(e,l),n||(i=[R(e,"dragend",s[11]),R(e,"dragleave",s[14]),R(e,"dragenter",s[15]),R(e,"dragstart",s[16]),R(e,"dragover",s[17]),R(e,"drop",s[18])],n=!0)},p(o,a){a&4&&t!==(t=(o[9](o[2])||"")+"")&&_e(l,t),a&1&&w(e,"id",o[0]),a&6&&r!==(r=o[2]!=null&&o[1])&&w(e,"draggable",r),a&32&&oe(e,"highlight",o[5]),a&2&&oe(e,"disabled",!o[1]),a&8&&ce(e,"background-color",o[3])},d(o){o&&g(e),n=!1,We(i)}}}function Ae(s){let e,t;return{c(){e=S("section"),t=re("Unavailable"),this.h()},l(l){e=I(l,"SECTION",{class:!0});var r=C(e);t=ne(r,"Unavailable"),r.forEach(g),this.h()},h(){w(e,"class","hourItem svelte-184l6dg")},m(l,r){N(l,e,r),D(e,t)},d(l){l&&g(e)}}}function Ot(s){let e,t,l,r,n=!(s[2]instanceof A)&&Ue(s),i=(s[2]instanceof A||s[4])&&Ae();return{c(){e=S("div"),n&&n.c(),t=L(),i&&i.c(),this.h()},l(o){e=I(o,"DIV",{class:!0,style:!0});var a=C(e);n&&n.l(a),t=B(a),i&&i.l(a),a.forEach(g),this.h()},h(){w(e,"class","container container-fluid btn text-wrap align-middle hour svelte-184l6dg"),ce(e,"position","relative")},m(o,a){N(o,e,a),n&&n.m(e,null),D(e,t),i&&i.m(e,null),l||(r=R(e,"click",s[10]),l=!0)},p(o,[a]){o[2]instanceof A?n&&(n.d(1),n=null):n?n.p(o,a):(n=Ue(o),n.c(),n.m(e,t)),o[2]instanceof A||o[4]?i||(i=Ae(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:Se,o:Se,d(o){o&&g(e),n&&n.d(),i&&i.d(),l=!1,r()}}}function Mt(s,e,t){const l=tt();let{id:r}=e,{draggable:n=!0}=e,{droppable:i=!0}=e,o=!1,{subject:a}=e,{color:f="transparent"}=e,{isProfessorView:h=!1}=e,{unavailable:d=!1}=e;function c(v){i&&v.preventDefault()}function u(v){v.dataTransfer.setData("subject",st(a)),v.dataTransfer.setData("id",v.target.id),l("hourDrag",a)}function _(v){v.preventDefault();let M=Xe(v.dataTransfer.getData("subject"));l("hourDrop",{subject:M,id:v.dataTransfer.getData("id")}),t(5,o=!1)}function T(v){if(v)return h?`${v.schoolClass} - ${v.abbreviation}`:`${v.professor.name} ${v.professor.surname} - ${v.abbreviation}`}function b(){l("click")}function k(){l("dragend")}const j=()=>t(5,o=!1),V=()=>t(5,o=n),Y=v=>u(v),p=v=>c(v),O=v=>_(v);return s.$$set=v=>{"id"in v&&t(0,r=v.id),"draggable"in v&&t(1,n=v.draggable),"droppable"in v&&t(12,i=v.droppable),"subject"in v&&t(2,a=v.subject),"color"in v&&t(3,f=v.color),"isProfessorView"in v&&t(13,h=v.isProfessorView),"unavailable"in v&&t(4,d=v.unavailable)},[r,n,a,f,d,o,c,u,_,T,b,k,i,h,j,V,Y,p,O]}class $e extends ${constructor(e){super(),x(this,e,Mt,Ot,ee,{id:0,draggable:1,droppable:12,subject:2,color:3,isProfessorView:13,unavailable:4})}}function Le(s,e,t){const l=s.slice();return l[22]=e[t],l[24]=t,l}function Be(s,e,t){const l=s.slice();return l[22]=e[t],l[26]=t,l}function He(s,e,t){const l=s.slice();return l[22]=e[t],l[26]=t,l}function Re(s,e,t){const l=s.slice();return l[28]=e[t],l[30]=t,l}function ze(s){let e,t,l,r,n,i=s[8](s[28])+"",o,a,f;function h(){return s[14](s[28])}return l=new $e({props:{isProfessorView:s[3],color:s[7](s[28]),droppable:!1,draggable:s[8](s[28])>0,id:"prova",subject:s[28]}}),l.$on("hourDrag",h),l.$on("dragend",s[11]),l.$on("hourDrop",Bt),{c(){e=S("li"),t=S("div"),Q(l.$$.fragment),r=L(),n=S("span"),o=re(i),a=L(),this.h()},l(d){e=I(d,"LI",{class:!0});var c=C(e);t=I(c,"DIV",{class:!0});var u=C(t);X(l.$$.fragment,u),u.forEach(g),r=B(c),n=I(c,"SPAN",{class:!0});var _=C(n);o=ne(_,i),_.forEach(g),a=B(c),c.forEach(g),this.h()},h(){w(t,"class","w-75"),w(n,"class","badge bg-primary rounded-pill"),w(e,"class","list-group-item d-flex justify-content-between align-items-center")},m(d,c){N(d,e,c),D(e,t),Z(l,t,null),D(e,r),D(e,n),D(n,o),D(e,a),f=!0},p(d,c){s=d;const u={};c[0]&8&&(u.isProfessorView=s[3]),c[0]&1&&(u.color=s[7](s[28])),c[0]&1&&(u.draggable=s[8](s[28])>0),c[0]&1&&(u.subject=s[28]),l.$set(u),(!f||c[0]&1)&&i!==(i=s[8](s[28])+"")&&_e(o,i)},i(d){f||(E(l.$$.fragment,d),f=!0)},o(d){P(l.$$.fragment,d),f=!1},d(d){d&&g(e),y(l)}}}function Fe(s){let e,t=s[2][s[26]]+"",l;return{c(){e=S("th"),l=re(t),this.h()},l(r){e=I(r,"TH",{class:!0});var n=C(e);l=ne(n,t),n.forEach(g),this.h()},h(){w(e,"class","col-2 svelte-4dej2c")},m(r,n){N(r,e,n),D(e,l)},p(r,n){n[0]&4&&t!==(t=r[2][r[26]]+"")&&_e(l,t)},d(r){r&&g(e)}}}function Ge(s){let e,t,l;function r(){return s[16](s[26],s[24])}function n(){return s[17](s[26],s[24])}function i(...o){return s[18](s[24],s[26],...o)}return t=new $e({props:{unavailable:s[4]!==null&&s[4].values[s[26]][s[24]]instanceof A,isProfessorView:s[3],color:s[7](s[1].getSubjectOn(s[26],s[24])),id:`${s[24]},${s[26]}`,subject:s[1].values[s[26]][s[24]]}}),t.$on("hourDrag",r),t.$on("dragend",s[11]),t.$on("click",n),t.$on("hourDrop",i),{c(){e=S("td"),Q(t.$$.fragment),this.h()},l(o){e=I(o,"TD",{class:!0});var a=C(e);X(t.$$.fragment,a),a.forEach(g),this.h()},h(){w(e,"class","svelte-4dej2c")},m(o,a){N(o,e,a),Z(t,e,null),l=!0},p(o,a){s=o;const f={};a[0]&16&&(f.unavailable=s[4]!==null&&s[4].values[s[26]][s[24]]instanceof A),a[0]&8&&(f.isProfessorView=s[3]),a[0]&2&&(f.color=s[7](s[1].getSubjectOn(s[26],s[24]))),a[0]&2&&(f.subject=s[1].values[s[26]][s[24]]),t.$set(f)},i(o){l||(E(t.$$.fragment,o),l=!0)},o(o){P(t.$$.fragment,o),l=!1},d(o){o&&g(e),y(t)}}}function qe(s){let e,t,l,r={length:ue},n=[];for(let o=0;o<r.length;o+=1)n[o]=Ge(Be(s,r,o));const i=o=>P(n[o],1,1,()=>{n[o]=null});return{c(){e=S("tr");for(let o=0;o<n.length;o+=1)n[o].c();t=L(),this.h()},l(o){e=I(o,"TR",{class:!0});var a=C(e);for(let f=0;f<n.length;f+=1)n[f].l(a);t=B(a),a.forEach(g),this.h()},h(){w(e,"class","svelte-4dej2c")},m(o,a){N(o,e,a);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);D(e,t),l=!0},p(o,a){if(a[0]&3770){r={length:ue};let f;for(f=0;f<r.length;f+=1){const h=Be(o,r,f);n[f]?(n[f].p(h,a),E(n[f],1)):(n[f]=Ge(h),n[f].c(),E(n[f],1),n[f].m(e,t))}for(le(),f=r.length;f<n.length;f+=1)i(f);se()}},i(o){if(!l){for(let a=0;a<r.length;a+=1)E(n[a]);l=!0}},o(o){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)P(n[a]);l=!1},d(o){o&&g(e),fe(n,o)}}}function Ut(s){let e,t,l,r,n,i={length:ue},o=[];for(let d=0;d<i.length;d+=1)o[d]=Fe(He(s,i,d));let a={length:de},f=[];for(let d=0;d<a.length;d+=1)f[d]=qe(Le(s,a,d));const h=d=>P(f[d],1,1,()=>{f[d]=null});return{c(){e=S("thead"),t=S("tr");for(let d=0;d<o.length;d+=1)o[d].c();l=L();for(let d=0;d<f.length;d+=1)f[d].c();r=he(),this.h()},l(d){e=I(d,"THEAD",{});var c=C(e);t=I(c,"TR",{class:!0});var u=C(t);for(let _=0;_<o.length;_+=1)o[_].l(u);u.forEach(g),c.forEach(g),l=B(d);for(let _=0;_<f.length;_+=1)f[_].l(d);r=he(),this.h()},h(){w(t,"class","svelte-4dej2c")},m(d,c){N(d,e,c),D(e,t);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null);N(d,l,c);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(d,c);N(d,r,c),n=!0},p(d,c){if(c[0]&4){i={length:ue};let u;for(u=0;u<i.length;u+=1){const _=He(d,i,u);o[u]?o[u].p(_,c):(o[u]=Fe(_),o[u].c(),o[u].m(t,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=i.length}if(c[0]&3770){a={length:de};let u;for(u=0;u<a.length;u+=1){const _=Le(d,a,u);f[u]?(f[u].p(_,c),E(f[u],1)):(f[u]=qe(_),f[u].c(),E(f[u],1),f[u].m(r.parentNode,r))}for(le(),u=a.length;u<f.length;u+=1)h(u);se()}},i(d){if(!n){for(let c=0;c<a.length;c+=1)E(f[c]);n=!0}},o(d){f=f.filter(Boolean);for(let c=0;c<f.length;c+=1)P(f[c]);n=!1},d(d){d&&g(e),fe(o,d),d&&g(l),fe(f,d),d&&g(r)}}}function At(s){let e,t,l,r,n,i,o,a,f,h,d,c,u,_,T,b,k,j=s[0],V=[];for(let p=0;p<j.length;p+=1)V[p]=ze(Re(s,j,p));const Y=p=>P(V[p],1,1,()=>{V[p]=null});return h=new Nt({props:{$$slots:{default:[Ut]},$$scope:{ctx:s}}}),{c(){e=S("head"),t=S("link"),l=L(),r=S("div"),n=S("div"),i=S("div"),o=S("ul");for(let p=0;p<V.length;p+=1)V[p].c();a=L(),f=S("div"),Q(h.$$.fragment),d=L(),c=S("div"),u=S("button"),_=re("valida orario"),this.h()},l(p){e=I(p,"HEAD",{});var O=C(e);t=I(O,"LINK",{rel:!0,href:!0}),O.forEach(g),l=B(p),r=I(p,"DIV",{class:!0});var v=C(r);n=I(v,"DIV",{class:!0});var M=C(n);i=I(M,"DIV",{class:!0});var m=C(i);o=I(m,"UL",{class:!0});var U=C(o);for(let me=0;me<V.length;me+=1)V[me].l(U);U.forEach(g),m.forEach(g),a=B(M),f=I(M,"DIV",{class:!0});var H=C(f);X(h.$$.fragment,H),d=B(H),c=I(H,"DIV",{class:!0});var J=C(c);u=I(J,"BUTTON",{type:!0,class:!0});var W=C(u);_=ne(W,"valida orario"),W.forEach(g),J.forEach(g),H.forEach(g),M.forEach(g),v.forEach(g),this.h()},h(){w(t,"rel","stylesheet"),w(t,"href","https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"),w(o,"class","list-group"),w(i,"class","overflow-auto vh-100 row col-2"),w(u,"type","button"),w(u,"class","btn btn-primary btn-lg w-100"),w(c,"class","d-flex justify-content-center"),w(f,"class","col-10"),w(n,"class","row "),w(r,"class","container-fluid")},m(p,O){N(p,e,O),D(e,t),N(p,l,O),N(p,r,O),D(r,n),D(n,i),D(i,o);for(let v=0;v<V.length;v+=1)V[v]&&V[v].m(o,null);D(n,a),D(n,f),Z(h,f,null),D(f,d),D(f,c),D(c,u),D(u,_),T=!0,b||(k=[R(o,"dragover",Ht),R(o,"drop",s[15]),R(u,"click",s[19])],b=!0)},p(p,O){if(O[0]&3465){j=p[0];let M;for(M=0;M<j.length;M+=1){const m=Re(p,j,M);V[M]?(V[M].p(m,O),E(V[M],1)):(V[M]=ze(m),V[M].c(),E(V[M],1),V[M].m(o,null))}for(le(),M=j.length;M<V.length;M+=1)Y(M);se()}const v={};O[0]&30|O[1]&1&&(v.$$scope={dirty:O,ctx:p}),h.$set(v)},i(p){if(!T){for(let O=0;O<j.length;O+=1)E(V[O]);E(h.$$.fragment,p),T=!0}},o(p){V=V.filter(Boolean);for(let O=0;O<V.length;O+=1)P(V[O]);P(h.$$.fragment,p),T=!1},d(p){p&&g(e),p&&g(l),p&&g(r),fe(V,p),y(h),b=!1,We(k)}}}function Lt(){alert("Work in progess...")}const Bt=s=>{},Ht=s=>s.preventDefault();function Rt(s,e,t){let{weekNames:l=["MON","TUE","WED","THU","FRI","SAT"]}=e,{grid:r}=e,{sidebar:n}=e,{professorView:i}=e,{selectedItem:o}=e,a=null;const f=["#fa968e","#79c9f7","#88f28d","#f0ce78","#f2a477","#c57ff0"];let{subjectColors:h=new Map}=e;const d=()=>{let m=0;h.clear(),n.forEach(U=>h.set(U.id,f[m++%f.length]))};function c(m,U,H){const J=r.getSubjectOn(U,m);De(U,m,H.subject);const W=H.id.split(",");W.length==2&&(ke(Number.parseInt(W[1]),Number.parseInt(W[0]),H.subject),J instanceof Ie&&De(Number.parseInt(W[1]),Number.parseInt(W[0]),J)),t(0,n),t(1,r)}function u(m){const U=Xe(m.dataTransfer.getData("subject")),J=m.dataTransfer.getData("id").split(",");ke(Number.parseInt(J[1]),Number.parseInt(J[0]),U),t(1,r),t(0,n)}function _(m){return m==null||m instanceof A?"transparent":h.get(m.id)}function T(m){return m.hoursPerWeek.value-r.getCountOf(m)}function b(m,U){const H=r.getSubjectOn(m,U);H instanceof A?Ce(m,U,o,!0):H==null&&Ce(m,U,o,!1),t(1,r)}function k(m){m instanceof Ie&&(t(4,a=ye(i?m.schoolClass:m.professor)),console.log("POG",a.values))}function j(){t(4,a=null),console.log("UNPOG")}const V=m=>k(m),Y=m=>u(m),p=(m,U)=>k(r.values[m][U]),O=(m,U)=>b(m,U),v=(m,U,H)=>c(m,U,H.detail),M=m=>Lt();return s.$$set=m=>{"weekNames"in m&&t(2,l=m.weekNames),"grid"in m&&t(1,r=m.grid),"sidebar"in m&&t(0,n=m.sidebar),"professorView"in m&&t(3,i=m.professorView),"selectedItem"in m&&t(12,o=m.selectedItem),"subjectColors"in m&&t(13,h=m.subjectColors)},s.$$.update=()=>{s.$$.dirty[0]&1&&n&&d()},[n,r,l,i,a,c,u,_,T,b,k,j,o,h,V,Y,p,O,v,M]}class zt extends ${constructor(e){super(),x(this,e,Rt,At,ee,{weekNames:2,grid:1,sidebar:0,professorView:3,selectedItem:12,subjectColors:13},null,[-1,-1])}}function Ke(s,e,t){const l=s.slice();return l[10]=e[t],l}function Ye(s){let e,t,l=s[10].toString()+"",r,n,i,o;function a(){return s[8](s[10])}return{c(){e=S("li"),t=S("a"),r=re(l),n=L(),this.h()},l(f){e=I(f,"LI",{class:!0});var h=C(e);t=I(h,"A",{class:!0,href:!0});var d=C(t);r=ne(d,l),d.forEach(g),n=B(h),h.forEach(g),this.h()},h(){w(t,"class","nav-link"),w(t,"href","#"),oe(t,"active",s[10]==s[1]),w(e,"class","nav-item")},m(f,h){N(f,e,h),D(e,t),D(t,r),D(e,n),i||(o=R(t,"click",a),i=!0)},p(f,h){s=f,h&25&&l!==(l=s[10].toString()+"")&&_e(r,l),h&27&&oe(t,"active",s[10]==s[1])},d(f){f&&g(e),i=!1,o()}}}function Je(s){let e,t;return e=new zt({props:{selectedItem:s[1],professorView:s[0],grid:s[2],sidebar:s[5]}}),{c(){Q(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,r){Z(e,l,r),t=!0},p(l,r){const n={};r&2&&(n.selectedItem=l[1]),r&1&&(n.professorView=l[0]),r&4&&(n.grid=l[2]),r&32&&(n.sidebar=l[5]),e.$set(n)},i(l){t||(E(e.$$.fragment,l),t=!0)},o(l){P(e.$$.fragment,l),t=!1},d(l){y(e,l)}}}function Ft(s){let e,t,l,r,n,i,o,a,f,h,d,c,u=s[0]?s[4]:s[3],_=[];for(let b=0;b<u.length;b+=1)_[b]=Ye(Ke(s,u,b));let T=s[2]&&s[1]&&Je(s);return{c(){e=S("div"),t=S("div"),l=S("input"),r=L(),n=S("label"),i=re("Professor View"),o=L(),a=S("ul");for(let b=0;b<_.length;b+=1)_[b].c();f=L(),T&&T.c(),this.h()},l(b){e=I(b,"DIV",{class:!0});var k=C(e);t=I(k,"DIV",{class:!0});var j=C(t);l=I(j,"INPUT",{class:!0,type:!0,id:!0}),r=B(j),n=I(j,"LABEL",{class:!0,for:!0});var V=C(n);i=ne(V,"Professor View"),V.forEach(g),j.forEach(g),o=B(k),a=I(k,"UL",{class:!0});var Y=C(a);for(let p=0;p<_.length;p+=1)_[p].l(Y);Y.forEach(g),f=B(k),T&&T.l(k),k.forEach(g),this.h()},h(){w(l,"class","form-check-input"),w(l,"type","checkbox"),w(l,"id","flexSwitchCheckChecked"),l.checked=s[0],w(n,"class","form-check-label"),w(n,"for","flexSwitchCheckChecked"),w(t,"class","form-check form-switch"),w(a,"class","nav nav-tabs"),w(e,"class","m-3")},m(b,k){N(b,e,k),D(e,t),D(t,l),D(t,r),D(t,n),D(n,i),D(e,o),D(e,a);for(let j=0;j<_.length;j+=1)_[j]&&_[j].m(a,null);D(e,f),T&&T.m(e,null),h=!0,d||(c=R(l,"click",s[7]),d=!0)},p(b,[k]){if((!h||k&1)&&(l.checked=b[0]),k&91){u=b[0]?b[4]:b[3];let j;for(j=0;j<u.length;j+=1){const V=Ke(b,u,j);_[j]?_[j].p(V,k):(_[j]=Ye(V),_[j].c(),_[j].m(a,null))}for(;j<_.length;j+=1)_[j].d(1);_.length=u.length}b[2]&&b[1]?T?(T.p(b,k),k&6&&E(T,1)):(T=Je(b),T.c(),E(T,1),T.m(e,null)):T&&(le(),P(T,1,1,()=>{T=null}),se())},i(b){h||(E(T),h=!0)},o(b){P(T),h=!1},d(b){b&&g(e),fe(_,b),T&&T.d(),d=!1,c()}}}function Gt(s,e,t){let l=[],r=[],n=[],i=[];rt.subscribe(u=>t(3,r=u)),nt.subscribe(u=>{l=u});let{professorView:o=!1}=e,{selectedItem:a=null}=e,{currentTimeTable:f=null}=e;ot.subscribe(u=>{t(4,n=u)});function h(u){let _=u instanceof Te?be(u):ge(u);t(2,f=_),t(1,a=u),u instanceof Te?t(5,i=l.filter(T=>T.professor.id==u.id)):t(5,i=l.filter(T=>T.schoolClass.id==u.id))}function d(){t(0,o=!o),h(o?n[0]:r[0])}const c=u=>h(u);return s.$$set=u=>{"professorView"in u&&t(0,o=u.professorView),"selectedItem"in u&&t(1,a=u.selectedItem),"currentTimeTable"in u&&t(2,f=u.currentTimeTable)},[o,a,f,r,n,i,h,d,c]}class Jt extends ${constructor(e){super(),x(this,e,Gt,Ft,ee,{professorView:0,selectedItem:1,currentTimeTable:2})}}export{Jt as component};
