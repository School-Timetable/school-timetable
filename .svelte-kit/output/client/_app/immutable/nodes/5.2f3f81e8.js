var Re=Object.defineProperty;var qe=(l,e,t)=>e in l?Re(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var R=(l,e,t)=>(qe(l,typeof e!="symbol"?e+"":e,t),t);import{S as te,i as le,s as se,k as E,l as I,m as V,h as k,n as T,b as B,R as L,v as K,d as N,f as Q,g as P,T as de,ad as Ze,q as Y,r as J,p as Z,ae as q,W as S,u as ge,Y as fe,y as X,z as $,A as x,B as ee,a as U,c as y,_ as F,Q as me,o as Fe,am as ve,V as Ke,w as Qe}from"../chunks/index.6f3fdfc3.js";import{l as Ye,P as he,E as Je,F as Ue,I as Xe,f as ae,e as ie,t as ye,S as pe,G as $e,H as xe,b as et,d as tt,a as lt}from"../chunks/Offcanvas.svelte_svelte_type_style_lang.5b4fd23b.js";class H{constructor(){R(this,"id","unavailable")}}R(H,"static_id","unavailable");const ue=new Map,ce=new Map,He=6,ze=8;class Be{constructor(e,t){R(this,"values",[]);R(this,"daysPerWeek");R(this,"hoursPerDay");R(this,"subjectsMap",new Map);this.daysPerWeek=e,this.hoursPerDay=t;for(let s=0;s<e;s++){this.values.push([]);for(let r=0;r<t;r++)this.values[s].push(null)}}getSubjectOn(e,t){if(!this.isValidTimeslot(e,t))throw new Error("Invalid timeslot");return this.values[e][t]}setSubjectOn(e,t,s){if(!this.isValidTimeslot(e,t))throw new Error("Invalid timeslot");const r=this.values[e][t];this.values[e][t]=s,this.updateSubjectsMap(e,t,s,r)}updateSubjectsMap(e,t,s,r){if(r!=null){const n=this.subjectsMap.get(r.id),m=n.findIndex(a=>a.dayOfWeek==e&&a.timeOfDay==t);n.splice(m,1)}if(s!=null){this.subjectsMap.has(s.id)||this.subjectsMap.set(s.id,[]);const n=this.subjectsMap.get(s.id);n.push({dayOfWeek:e,timeOfDay:t}),this.sortTimeSlots(n)}}computeSubjectMap(){return this.subjectsMap}sortTimeSlots(e){e.sort((t,s)=>t.dayOfWeek!=s.dayOfWeek?t.dayOfWeek-s.dayOfWeek:t.timeOfDay-s.timeOfDay)}isAvailableOn(e,t){var r;return(((r=this.getSubjectOn(e,t))==null?void 0:r.constructor.name)??"")!=H.name}isUnavailableOn(e,t){return!this.isAvailableOn(e,t)}isAssignedOn(e,t){const s=this.getSubjectOn(e,t);return s!=null&&s.constructor.name!==H.name}isUnassignedOn(e,t){return this.getSubjectOn(e,t)==null}isValidTimeslot(e,t){return 0<=e&&e<this.daysPerWeek&&0<=t&&t<this.hoursPerDay&&Number.isInteger(e)&&Number.isInteger(t)}clear(){for(let e=0;e<this.daysPerWeek;e++)for(let t=0;t<this.hoursPerDay;t++)this.values[e][t]=null;this.subjectsMap.clear()}removeAllOf(e){const t=this.subjectsMap.get(e.id);if(t!=null){for(const{dayOfWeek:s,timeOfDay:r}of t)this.values[s][r]=null;this.subjectsMap.delete(e.id)}}getTimeSlotsOf(e){return this.subjectsMap.get(e.id)??[]}getCountOf(e){return this.getTimeSlotsOf(e).length}getUnavailableTimeslots(){return this.getTimeSlotsOf(new H)}getUnassignedTimeslots(){const e=[];for(let t=0;t<this.daysPerWeek;t++)for(let s=0;s<this.hoursPerDay;s++)this.isUnassignedOn(t,s)&&e.push({dayOfWeek:t,timeOfDay:s});return e}}function je(l,e,t){const s=re(t.schoolClass);we(l,e,t,s);const r=ne(t.professor);we(l,e,t,r)}function we(l,e,t,s){const r=s.getSubjectOn(l,e);if((r==null?void 0:r.constructor.name)==H.name)throw new Error("Trying to assign a subject on an unavailable timeslot");r!=null&&be(l,e,r),s.setSubjectOn(l,e,t)}function be(l,e,t){var n,m;if(t.constructor.name==H.name)throw new Error("Trying to remove an unavailable subject");const s=re(t.schoolClass),r=ne(t.professor);if(((n=s.getSubjectOn(l,e))==null?void 0:n.id)!=t.id||((m=r.getSubjectOn(l,e))==null?void 0:m.id)!=t.id)throw new Error("Trying to remove a subject from a timeslot that doesn't contain it");s.setSubjectOn(l,e,null),r.setSubjectOn(l,e,null)}function Te(l,e,t,s=!1){const r=Ge(t),n=r.getSubjectOn(l,e);if(s){if((n==null?void 0:n.constructor.name)!=H.name)return}else if(r.isAssignedOn(l,e))throw new Error("Trying to set unavailable on an assigned timeslot");const m=s?null:new H;r.setSubjectOn(l,e,m)}function re(l){const e=l.id;return ue.has(e)||ue.set(e,new Be(He,ze)),ue.get(e)}function ne(l){const e=l.id;return ce.has(e)||ce.set(e,new Be(He,ze)),ce.get(e)}function Ge(l){if(l instanceof Ye)return re(l);if(l instanceof he)return ne(l);throw new Error("entity is not a SchoolClass or a Professor")}function st(l){let e,t=(l[9](l[2])||"")+"",s,r,n,m;return{c(){e=E("section"),s=Y(t),this.h()},l(a){e=I(a,"SECTION",{class:!0,style:!0,draggable:!0,id:!0});var i=V(e);s=J(i,t),i.forEach(k),this.h()},h(){T(e,"class","btn hourItem svelte-xnyhct"),Z(e,"user-select","none"),T(e,"draggable",r=l[2]!=null&&l[1]),T(e,"id",l[0]),q(e,"highlight",l[5]),q(e,"disabled",!l[1]),Z(e,"background-color",l[3])},m(a,i){B(a,e,i),S(e,s),n||(m=[L(e,"dragend",l[11]),L(e,"dragleave",l[14]),L(e,"dragenter",l[15]),L(e,"dragstart",l[16]),L(e,"dragover",l[17])],n=!0)},p(a,i){i&4&&t!==(t=(a[9](a[2])||"")+"")&&ge(s,t),i&6&&r!==(r=a[2]!=null&&a[1])&&T(e,"draggable",r),i&1&&T(e,"id",a[0]),i&32&&q(e,"highlight",a[5]),i&2&&q(e,"disabled",!a[1]),i&8&&Z(e,"background-color",a[3])},i:fe,o:fe,d(a){a&&k(e),n=!1,de(m)}}}function rt(l){let e,t;return e=new Xe({props:{style:"font-size: 30px;",name:"x"}}),{c(){X(e.$$.fragment)},l(s){$(e.$$.fragment,s)},m(s,r){x(e,s,r),t=!0},p:fe,i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function nt(l){let e,t,s,r,n,m;const a=[rt,st],i=[];function _(c,b){return c[2]instanceof H||c[4]?0:1}return t=_(l),s=i[t]=a[t](l),{c(){e=E("div"),s.c(),this.h()},l(c){e=I(c,"DIV",{class:!0});var b=V(e);s.l(b),b.forEach(k),this.h()},h(){T(e,"class","text-wrap align-middle hour text-center svelte-xnyhct")},m(c,b){B(c,e,b),i[t].m(e,null),r=!0,n||(m=[L(e,"drop",l[18]),L(e,"click",l[10])],n=!0)},p(c,[b]){let v=t;t=_(c),t===v?i[t].p(c,b):(K(),N(i[v],1,1,()=>{i[v]=null}),Q(),s=i[t],s?s.p(c,b):(s=i[t]=a[t](c),s.c()),P(s,1),s.m(e,null))},i(c){r||(P(s),r=!0)},o(c){N(s),r=!1},d(c){c&&k(e),i[t].d(),n=!1,de(m)}}}function ot(l,e,t){const s=Ze();let{id:r}=e,{draggable:n=!0}=e,{droppable:m=!0}=e,a=!1,{subject:i}=e,{color:_="transparent"}=e,{isProfessorView:c=!1}=e,{unavailable:b=!1}=e;function v(p){m&&p.preventDefault()}function f(p){p.dataTransfer.setData("subject",Je(i)),p.dataTransfer.setData("id",p.target.id),s("hourDrag",i)}function o(p){p.preventDefault();let O=Ue(p.dataTransfer.getData("subject"));s("hourDrop",{subject:O,id:p.dataTransfer.getData("id")}),t(5,a=!1)}function h(p){if(p)return c?`${p.schoolClass} - ${p.abbreviation}`:`${p.professor.name} ${p.professor.surname} - ${p.abbreviation}`}function u(){s("click")}function D(){s("dragend")}const j=()=>t(5,a=!1),d=()=>t(5,a=n),A=p=>f(p),z=p=>v(p),w=p=>o(p);return l.$$set=p=>{"id"in p&&t(0,r=p.id),"draggable"in p&&t(1,n=p.draggable),"droppable"in p&&t(12,m=p.droppable),"subject"in p&&t(2,i=p.subject),"color"in p&&t(3,_=p.color),"isProfessorView"in p&&t(13,c=p.isProfessorView),"unavailable"in p&&t(4,b=p.unavailable)},[r,n,i,_,b,a,v,f,o,h,u,D,m,c,j,d,A,z,w]}class We extends te{constructor(e){super(),le(this,e,ot,nt,se,{id:0,draggable:1,droppable:12,subject:2,color:3,isProfessorView:13,unavailable:4})}}const ke=["#fa968e","#79c9f7","#88f28d","#f0ce78","#f2a477","#c57ff0"],Se=["#540d10","#2a6587","#2e6e31","#a17b1d","#8f461d","#451c5e"];function De(l,e,t){const s=l.slice();return s[23]=e[t],s[25]=t,s}function Ee(l,e,t){const s=l.slice();return s[23]=e[t],s[27]=t,s}function Ie(l,e,t){const s=l.slice();return s[23]=e[t],s[27]=t,s}function Ve(l){let e,t,s,r,n,m;function a(){return l[17](l[27])}return{c(){e=E("th"),t=E("input"),r=U(),this.h()},l(i){e=I(i,"TH",{class:!0});var _=V(e);t=I(_,"INPUT",{id:!0,type:!0,class:!0}),r=y(_),_.forEach(k),this.h()},h(){T(t,"id","day_label_"+l[27]),T(t,"type","text"),T(t,"class","input_text svelte-1dzj1ao"),t.value=s=l[6][l[27]]?l[6][l[27]].label:"day_"+(l[27]+1),T(e,"class","col-2 svelte-1dzj1ao")},m(i,_){B(i,e,_),S(e,t),S(e,r),n||(m=L(t,"input",a),n=!0)},p(i,_){l=i,_&64&&s!==(s=l[6][l[27]]?l[6][l[27]].label:"day_"+(l[27]+1))&&t.value!==s&&(t.value=s)},d(i){i&&k(e),n=!1,m()}}}function Ce(l){let e,t,s;function r(){return l[19](l[27],l[25])}function n(){return l[20](l[27],l[25])}function m(...a){return l[21](l[25],l[27],...a)}return t=new We({props:{unavailable:l[4]!==null&&l[4].values[l[27]][l[25]]instanceof H,isProfessorView:l[1],color:l[11](l[0].getSubjectOn(l[27],l[25])),id:`${l[25]},${l[27]}`,subject:l[0].values[l[27]][l[25]]}}),t.$on("hourDrag",r),t.$on("dragend",l[3]),t.$on("click",n),t.$on("hourDrop",m),{c(){e=E("td"),X(t.$$.fragment),this.h()},l(a){e=I(a,"TD",{class:!0});var i=V(e);$(t.$$.fragment,i),i.forEach(k),this.h()},h(){T(e,"class","svelte-1dzj1ao")},m(a,i){B(a,e,i),x(t,e,null),s=!0},p(a,i){l=a;const _={};i&16&&(_.unavailable=l[4]!==null&&l[4].values[l[27]][l[25]]instanceof H),i&2&&(_.isProfessorView=l[1]),i&1&&(_.color=l[11](l[0].getSubjectOn(l[27],l[25]))),i&1&&(_.subject=l[0].values[l[27]][l[25]]),t.$set(_)},i(a){s||(P(t.$$.fragment,a),s=!0)},o(a){N(t.$$.fragment,a),s=!1},d(a){a&&k(e),ee(t)}}}function Pe(l){let e,t,s,r,n,m,a,i;function _(){return l[18](l[25])}let c={length:l[8]},b=[];for(let f=0;f<c.length;f+=1)b[f]=Ce(Ee(l,c,f));const v=f=>N(b[f],1,1,()=>{b[f]=null});return{c(){e=E("tr"),t=E("input"),r=U();for(let f=0;f<b.length;f+=1)b[f].c();n=U(),this.h()},l(f){e=I(f,"TR",{class:!0});var o=V(e);t=I(o,"INPUT",{style:!0,id:!0,type:!0,class:!0}),r=y(o);for(let h=0;h<b.length;h+=1)b[h].l(o);n=y(o),o.forEach(k),this.h()},h(){Z(t,"min-width","70px"),T(t,"id","hour_label_"+l[25]),T(t,"type","text"),T(t,"class","input_text svelte-1dzj1ao"),t.value=s=l[5][l[25]]?l[5][l[25]].label:"hour_"+(l[25]+1),T(e,"class","svelte-1dzj1ao")},m(f,o){B(f,e,o),S(e,t),S(e,r);for(let h=0;h<b.length;h+=1)b[h]&&b[h].m(e,null);S(e,n),m=!0,a||(i=L(t,"input",_),a=!0)},p(f,o){if(l=f,(!m||o&32&&s!==(s=l[5][l[25]]?l[5][l[25]].label:"hour_"+(l[25]+1))&&t.value!==s)&&(t.value=s),o&3615){c={length:l[8]};let h;for(h=0;h<c.length;h+=1){const u=Ee(l,c,h);b[h]?(b[h].p(u,o),P(b[h],1)):(b[h]=Ce(u),b[h].c(),P(b[h],1),b[h].m(e,n))}for(K(),h=c.length;h<b.length;h+=1)v(h);Q()}},i(f){if(!m){for(let o=0;o<c.length;o+=1)P(b[o]);m=!0}},o(f){b=b.filter(Boolean);for(let o=0;o<b.length;o+=1)N(b[o]);m=!1},d(f){f&&k(e),F(b,f),a=!1,i()}}}function at(l){let e,t,s,r,n,m,a,i,_={length:l[8]},c=[];for(let o=0;o<_.length;o+=1)c[o]=Ve(Ie(l,_,o));let b={length:l[7]},v=[];for(let o=0;o<b.length;o+=1)v[o]=Pe(De(l,b,o));const f=o=>N(v[o],1,1,()=>{v[o]=null});return{c(){e=E("div"),t=E("table"),s=E("thead"),r=E("tr"),n=E("th"),m=U();for(let o=0;o<c.length;o+=1)c[o].c();a=U();for(let o=0;o<v.length;o+=1)v[o].c();this.h()},l(o){e=I(o,"DIV",{class:!0,style:!0});var h=V(e);t=I(h,"TABLE",{});var u=V(t);s=I(u,"THEAD",{});var D=V(s);r=I(D,"TR",{class:!0});var j=V(r);n=I(j,"TH",{class:!0}),V(n).forEach(k),m=y(j);for(let d=0;d<c.length;d+=1)c[d].l(j);j.forEach(k),D.forEach(k),a=y(u);for(let d=0;d<v.length;d+=1)v[d].l(u);u.forEach(k),h.forEach(k),this.h()},h(){T(n,"class","col-2 svelte-1dzj1ao"),T(r,"class","svelte-1dzj1ao"),T(e,"class","w-100"),Z(e,"overflow","auto")},m(o,h){B(o,e,h),S(e,t),S(t,s),S(s,r),S(r,n),S(r,m);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(r,null);S(t,a);for(let u=0;u<v.length;u+=1)v[u]&&v[u].m(t,null);i=!0},p(o,[h]){if(h&4160){_={length:o[8]};let u;for(u=0;u<_.length;u+=1){const D=Ie(o,_,u);c[u]?c[u].p(D,h):(c[u]=Ve(D),c[u].c(),c[u].m(r,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=_.length}if(h&12095){b={length:o[7]};let u;for(u=0;u<b.length;u+=1){const D=De(o,b,u);v[u]?(v[u].p(D,h),P(v[u],1)):(v[u]=Pe(D),v[u].c(),P(v[u],1),v[u].m(t,null))}for(K(),u=b.length;u<v.length;u+=1)f(u);Q()}},i(o){if(!i){for(let h=0;h<b.length;h+=1)P(v[h]);i=!0}},o(o){v=v.filter(Boolean);for(let h=0;h<v.length;h+=1)N(v[h]);i=!1},d(o){o&&k(e),F(c,o),F(v,o)}}}function it(){}function ut(l,e,t){let s,r;me(l,ae,g=>t(5,s=g)),me(l,ie,g=>t(6,r=g));let{timeTable:n}=e,{professorView:m}=e,{selectedItem:a}=e,{subjectColors:i=new Map}=e,{callback:_}=e,c=null,b=n.hoursPerDay,v=n.daysPerWeek;ye.subscribe(g=>{t(0,n)});function f(g){g instanceof pe&&(t(4,c=Ge(m?g.schoolClass:g.professor)),console.log("POG",c.values))}function o(){t(4,c=null),console.log("UNPOG")}function h(g,C){const M=n.getSubjectOn(g,C);M instanceof H?Te(g,C,a,!0):M==null&&Te(g,C,a,!1),t(0,n)}function u(g,C,M){const W=n.getSubjectOn(C,g);je(C,g,M.subject),o();const G=M.id.split(",");G.length==2&&(be(Number.parseInt(G[1]),Number.parseInt(G[0]),M.subject),W instanceof pe&&je(Number.parseInt(G[1]),Number.parseInt(G[0]),W)),_(),t(0,n)}function D(g){return g==null||g instanceof H?"transparent":i.get(g.id)}function j(g){let C=document.getElementById("day_label_"+g),M=C.value;M.match(/^[a-zA-Z0-9_\sì]*$/)?(ve(ie,r[g]=$e.of(g,M),r),ie.set,console.log(r)):r[g]?C.value=r[g].label:C.value="day_"+(g+1)}function d(g){let C=document.getElementById("hour_label_"+g),M=C.value;M.match(/^[a-zA-Z0-9_\:/\s]*$/)?(ve(ae,s[g]=xe.of(g,M),s),ae.set,console.log(s)):s[g]?C.value=s[g].label:C.value="hour_"+(g+1)}Fe(it);const A=g=>j(g),z=g=>d(g),w=(g,C)=>f(n.values[g][C]),p=(g,C)=>h(g,C),O=(g,C,M)=>u(g,C,M.detail);return l.$$set=g=>{"timeTable"in g&&t(0,n=g.timeTable),"professorView"in g&&t(1,m=g.professorView),"selectedItem"in g&&t(14,a=g.selectedItem),"subjectColors"in g&&t(15,i=g.subjectColors),"callback"in g&&t(16,_=g.callback)},[n,m,f,o,c,s,r,b,v,h,u,D,j,d,a,i,_,A,z,w,p,O]}class ct extends te{constructor(e){super(),le(this,e,ut,at,se,{timeTable:0,professorView:1,selectedItem:14,subjectColors:15,callback:16,onSubjectDrag:2,onSubjectDragEnd:3})}get onSubjectDrag(){return this.$$.ctx[2]}get onSubjectDragEnd(){return this.$$.ctx[3]}}function Oe(l,e,t){const s=l.slice();return s[17]=e[t],s[19]=t,s}function Me(l){let e,t,s,r,n,m=l[17].hoursPerWeek.value-l[1].getCountOf(l[17])+"",a,i,_;function c(){return l[10](l[17])}return s=new We({props:{isProfessorView:l[2],color:l[8](l[17]),droppable:!1,draggable:l[9](l[17])>0,id:"prova",subject:l[17]}}),s.$on("hourDrag",c),s.$on("dragend",function(){Ke(l[6].onSubjectDragEnd)&&l[6].onSubjectDragEnd.apply(this,arguments)}),s.$on("hourDrop",dt),{c(){e=E("li"),t=E("div"),X(s.$$.fragment),r=U(),n=E("span"),a=Y(m),i=U(),this.h()},l(b){e=I(b,"LI",{class:!0});var v=V(e);t=I(v,"DIV",{class:!0});var f=V(t);$(s.$$.fragment,f),f.forEach(k),r=y(v),n=I(v,"SPAN",{class:!0});var o=V(n);a=J(o,m),o.forEach(k),i=y(v),v.forEach(k),this.h()},h(){T(t,"class","w-100"),T(n,"class","badge bg-primary rounded-pill ms-2"),T(e,"class","list-group-item d-flex justify-content-between align-items-center")},m(b,v){B(b,e,v),S(e,t),x(s,t,null),S(e,r),S(e,n),S(n,a),S(e,i),_=!0},p(b,v){l=b;const f={};v&4&&(f.isProfessorView=l[2]),v&1&&(f.color=l[8](l[17])),v&1&&(f.draggable=l[9](l[17])>0),v&1&&(f.subject=l[17]),s.$set(f),(!_||v&3)&&m!==(m=l[17].hoursPerWeek.value-l[1].getCountOf(l[17])+"")&&ge(a,m)},i(b){_||(P(s.$$.fragment,b),_=!0)},o(b){N(s.$$.fragment,b),_=!1},d(b){b&&k(e),ee(s)}}}function ft(l){let e,t,s,r,n,m,a,i,_,c,b,v,f,o,h,u,D,j=l[0],d=[];for(let w=0;w<j.length;w+=1)d[w]=Me(Oe(l,j,w));const A=w=>N(d[w],1,1,()=>{d[w]=null});let z={timeTable:l[1],professorView:l[2],selectedItem:l[3],subjectColors:l[4],callback:l[5]};return c=new ct({props:z}),l[12](c),{c(){e=E("head"),t=E("link"),s=U(),r=E("div"),n=E("div"),m=E("div"),a=E("ul");for(let w=0;w<d.length;w+=1)d[w].c();i=U(),_=E("div"),X(c.$$.fragment),b=U(),v=E("div"),f=E("button"),o=Y("valida orario"),this.h()},l(w){e=I(w,"HEAD",{});var p=V(e);t=I(p,"LINK",{rel:!0,href:!0}),p.forEach(k),s=y(w),r=I(w,"DIV",{class:!0});var O=V(r);n=I(O,"DIV",{class:!0});var g=V(n);m=I(g,"DIV",{class:!0});var C=V(m);a=I(C,"UL",{class:!0});var M=V(a);for(let oe=0;oe<d.length;oe+=1)d[oe].l(M);M.forEach(k),C.forEach(k),i=y(g),_=I(g,"DIV",{class:!0});var W=V(_);$(c.$$.fragment,W),b=y(W),v=I(W,"DIV",{class:!0});var G=V(v);f=I(G,"BUTTON",{type:!0,class:!0});var _e=V(f);o=J(_e,"valida orario"),_e.forEach(k),G.forEach(k),W.forEach(k),g.forEach(k),O.forEach(k),this.h()},h(){T(t,"rel","stylesheet"),T(t,"href","https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"),T(a,"class","list-group me-1"),T(m,"class","overflow-auto vh-100 row col-2"),T(f,"type","button"),T(f,"class","btn btn-primary btn-lg w-100"),T(v,"class","d-flex justify-content-center my-4"),T(_,"class","col-10"),T(n,"class","d-flex"),T(r,"class","container-fluid")},m(w,p){B(w,e,p),S(e,t),B(w,s,p),B(w,r,p),S(r,n),S(n,m),S(m,a);for(let O=0;O<d.length;O+=1)d[O]&&d[O].m(a,null);S(n,i),S(n,_),x(c,_,null),S(_,b),S(_,v),S(v,f),S(f,o),h=!0,u||(D=[L(a,"dragover",gt),L(a,"drop",l[11]),L(f,"click",l[13])],u=!0)},p(w,[p]){if(p&839){j=w[0];let g;for(g=0;g<j.length;g+=1){const C=Oe(w,j,g);d[g]?(d[g].p(C,p),P(d[g],1)):(d[g]=Me(C),d[g].c(),P(d[g],1),d[g].m(a,null))}for(K(),g=j.length;g<d.length;g+=1)A(g);Q()}const O={};p&2&&(O.timeTable=w[1]),p&4&&(O.professorView=w[2]),p&8&&(O.selectedItem=w[3]),p&16&&(O.subjectColors=w[4]),c.$set(O)},i(w){if(!h){for(let p=0;p<j.length;p+=1)P(d[p]);P(c.$$.fragment,w),h=!0}},o(w){d=d.filter(Boolean);for(let p=0;p<d.length;p+=1)N(d[p]);N(c.$$.fragment,w),h=!1},d(w){w&&k(e),w&&k(s),w&&k(r),F(d,w),l[12](null),ee(c),u=!1,de(D)}}}function ht(){alert("Work in progess...")}const dt=l=>{},gt=l=>l.preventDefault();function bt(l,e,t){let{grid:s}=e,{sidebar:r}=e,{professorView:n}=e,{selectedItem:m}=e,a,i=ke,{subjectColors:_=new Map}=e;const c=()=>{let d=0;_.clear(),r.forEach(A=>_.set(A.id,i[d++%i.length]))};ye.subscribe(d=>{d=="light"?i=ke:(d=="dark",i=Se);let A=0;_.clear(),r.forEach(z=>_.set(z.id,i[A++%i.length])),o()});function b(d){const A=Ue(d.dataTransfer.getData("subject")),w=d.dataTransfer.getData("id").split(",");be(Number.parseInt(w[1]),Number.parseInt(w[0]),A),t(1,s),t(0,r)}function v(d){return d==null||d instanceof H?"transparent":_.get(d.id)}function f(d){return d.hoursPerWeek.value-s.getCountOf(d)}function o(){t(0,r)}const h=d=>a.onSubjectDrag(d),u=d=>b(d);function D(d){Qe[d?"unshift":"push"](()=>{a=d,t(6,a)})}const j=d=>ht();return l.$$set=d=>{"grid"in d&&t(1,s=d.grid),"sidebar"in d&&t(0,r=d.sidebar),"professorView"in d&&t(2,n=d.professorView),"selectedItem"in d&&t(3,m=d.selectedItem),"subjectColors"in d&&t(4,_=d.subjectColors)},l.$$.update=()=>{l.$$.dirty&1&&r&&c()},[r,s,n,m,_,o,a,b,v,f,h,u,D,j]}class _t extends te{constructor(e){super(),le(this,e,bt,ft,se,{grid:1,sidebar:0,professorView:2,selectedItem:3,subjectColors:4,refresh:5})}get refresh(){return this.$$.ctx[5]}}function Ne(l,e,t){const s=l.slice();return s[10]=e[t],s}function Ae(l){let e,t,s=l[10].toString()+"",r,n,m,a;function i(){return l[8](l[10])}return{c(){e=E("li"),t=E("a"),r=Y(s),n=U(),this.h()},l(_){e=I(_,"LI",{class:!0});var c=V(e);t=I(c,"A",{class:!0,href:!0});var b=V(t);r=J(b,s),b.forEach(k),n=y(c),c.forEach(k),this.h()},h(){T(t,"class","nav-link"),T(t,"href","#"),q(t,"active",l[10]==l[1]),T(e,"class","nav-item")},m(_,c){B(_,e,c),S(e,t),S(t,r),S(e,n),m||(a=L(t,"click",i),m=!0)},p(_,c){l=_,c&25&&s!==(s=l[10].toString()+"")&&ge(r,s),c&27&&q(t,"active",l[10]==l[1])},d(_){_&&k(e),m=!1,a()}}}function Le(l){let e,t;return e=new _t({props:{selectedItem:l[1],professorView:l[0],grid:l[2],sidebar:l[5]}}),{c(){X(e.$$.fragment)},l(s){$(e.$$.fragment,s)},m(s,r){x(e,s,r),t=!0},p(s,r){const n={};r&2&&(n.selectedItem=s[1]),r&1&&(n.professorView=s[0]),r&4&&(n.grid=s[2]),r&32&&(n.sidebar=s[5]),e.$set(n)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function mt(l){let e,t,s,r,n,m,a,i,_,c,b,v,f=l[0]?l[4]:l[3],o=[];for(let u=0;u<f.length;u+=1)o[u]=Ae(Ne(l,f,u));let h=l[2]&&l[1]&&Le(l);return{c(){e=E("div"),t=E("div"),s=E("input"),r=U(),n=E("label"),m=Y("Professor View"),a=U(),i=E("ul");for(let u=0;u<o.length;u+=1)o[u].c();_=U(),h&&h.c(),this.h()},l(u){e=I(u,"DIV",{class:!0});var D=V(e);t=I(D,"DIV",{class:!0});var j=V(t);s=I(j,"INPUT",{class:!0,type:!0,id:!0}),r=y(j),n=I(j,"LABEL",{class:!0,for:!0});var d=V(n);m=J(d,"Professor View"),d.forEach(k),j.forEach(k),a=y(D),i=I(D,"UL",{class:!0});var A=V(i);for(let z=0;z<o.length;z+=1)o[z].l(A);A.forEach(k),_=y(D),h&&h.l(D),D.forEach(k),this.h()},h(){T(s,"class","form-check-input"),T(s,"type","checkbox"),T(s,"id","flexSwitchCheckChecked"),s.checked=l[0],T(n,"class","form-check-label"),T(n,"for","flexSwitchCheckChecked"),T(t,"class","form-check form-switch"),T(i,"class","nav nav-tabs"),T(e,"class","m-3")},m(u,D){B(u,e,D),S(e,t),S(t,s),S(t,r),S(t,n),S(n,m),S(e,a),S(e,i);for(let j=0;j<o.length;j+=1)o[j]&&o[j].m(i,null);S(e,_),h&&h.m(e,null),c=!0,b||(v=L(s,"click",l[7]),b=!0)},p(u,[D]){if((!c||D&1)&&(s.checked=u[0]),D&91){f=u[0]?u[4]:u[3];let j;for(j=0;j<f.length;j+=1){const d=Ne(u,f,j);o[j]?o[j].p(d,D):(o[j]=Ae(d),o[j].c(),o[j].m(i,null))}for(;j<o.length;j+=1)o[j].d(1);o.length=f.length}u[2]&&u[1]?h?(h.p(u,D),D&6&&P(h,1)):(h=Le(u),h.c(),P(h,1),h.m(e,null)):h&&(K(),N(h,1,1,()=>{h=null}),Q())},i(u){c||(P(h),c=!0)},o(u){N(h),c=!1},d(u){u&&k(e),F(o,u),h&&h.d(),b=!1,v()}}}function vt(l,e,t){let s=[],r=[],n=[],m=[];et.subscribe(f=>t(3,r=f)),tt.subscribe(f=>{s=f});let{professorView:a=!1}=e,{selectedItem:i=null}=e,{currentTimeTable:_=null}=e;lt.subscribe(f=>{t(4,n=f)});function c(f){let o=f instanceof he?ne(f):re(f);t(2,_=o),t(1,i=f),f instanceof he?t(5,m=s.filter(h=>h.professor.id==f.id)):t(5,m=s.filter(h=>h.schoolClass.id==f.id))}function b(){t(0,a=!a),c(a?n[0]:r[0])}const v=f=>c(f);return l.$$set=f=>{"professorView"in f&&t(0,a=f.professorView),"selectedItem"in f&&t(1,i=f.selectedItem),"currentTimeTable"in f&&t(2,_=f.currentTimeTable)},[a,i,_,r,n,m,c,b,v]}class Tt extends te{constructor(e){super(),le(this,e,vt,mt,se,{professorView:0,selectedItem:1,currentTimeTable:2})}}export{Tt as component};
