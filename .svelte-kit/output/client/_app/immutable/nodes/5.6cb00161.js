var vt=Object.defineProperty;var kt=(s,e,t)=>e in s?vt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var ie=(s,e,t)=>(kt(s,typeof e!="symbol"?e+"":e,t),t);import{S as X,i as $,s as x,I as ee,k as j,l as D,m as S,h as p,b as W,K as te,L as le,M as se,g as N,d as U,D as Pe,e as we,v as re,f as oe,n as I,G as ne,J as he,W as T,N as Ce,C as de,H as Oe,y as K,z as Z,A as J,B as Q,a as B,c as A,_ as ue,R,T as _e,ad as wt,q as F,r as Y,p as G,ae as ce,u as fe,Y as Se,Q as Le,o as Tt,am as Be,w as Ne,a9 as ct,aa as ht,V as Et,a8 as ge}from"../chunks/index.6f3fdfc3.js";import{l as jt,P as Ve,c as dt,E as Dt,F as _t,I as It,f as me,e as pe,t as bt,S as Ae,G as ye,H as Re,b as St,d as Vt,a as Pt}from"../chunks/Offcanvas.svelte_svelte_type_style_lang.5b4fd23b.js";class q{constructor(){ie(this,"id","unavailable")}}ie(q,"static_id","unavailable");const ve=new Map,ke=new Map;let Te=6,Ee=8;class gt{constructor(e,t){ie(this,"values",[]);ie(this,"daysPerWeek");ie(this,"hoursPerDay");ie(this,"subjectsMap",new Map);this.daysPerWeek=e,this.hoursPerDay=t;for(let l=0;l<e;l++){this.values.push([]);for(let n=0;n<t;n++)this.values[l].push(null)}}getSubjectOn(e,t){if(!this.isValidTimeslot(e,t))throw new Error("Invalid timeslot");return this.values[e][t]}setSubjectOn(e,t,l){if(!this.isValidTimeslot(e,t))throw new Error("Invalid timeslot");const n=this.values[e][t];this.values[e][t]=l,this.updateSubjectsMap(e,t,l,n)}updateSubjectsMap(e,t,l,n){if(n!=null){const r=this.subjectsMap.get(n.id),o=r.findIndex(i=>i.dayOfWeek==e&&i.timeOfDay==t);r.splice(o,1)}if(l!=null){this.subjectsMap.has(l.id)||this.subjectsMap.set(l.id,[]);const r=this.subjectsMap.get(l.id);r.push({dayOfWeek:e,timeOfDay:t}),this.sortTimeSlots(r)}}computeSubjectMap(){return this.subjectsMap}sortTimeSlots(e){e.sort((t,l)=>t.dayOfWeek!=l.dayOfWeek?t.dayOfWeek-l.dayOfWeek:t.timeOfDay-l.timeOfDay)}isAvailableOn(e,t){var n;return(((n=this.getSubjectOn(e,t))==null?void 0:n.constructor.name)??"")!=q.name}isUnavailableOn(e,t){return!this.isAvailableOn(e,t)}isAssignedOn(e,t){const l=this.getSubjectOn(e,t);return l!=null&&l.constructor.name!==q.name}isUnassignedOn(e,t){return this.getSubjectOn(e,t)==null}isValidTimeslot(e,t){return 0<=e&&e<this.daysPerWeek&&0<=t&&t<this.hoursPerDay&&Number.isInteger(e)&&Number.isInteger(t)}clear(){for(let e=0;e<this.daysPerWeek;e++)for(let t=0;t<this.hoursPerDay;t++)this.values[e][t]=null;this.subjectsMap.clear()}removeAllOf(e){const t=this.subjectsMap.get(e.id);if(t!=null){for(const{dayOfWeek:l,timeOfDay:n}of t)this.values[l][n]=null;this.subjectsMap.delete(e.id)}}getTimeSlotsOf(e){return this.subjectsMap.get(e.id)??[]}getCountOf(e){return this.getTimeSlotsOf(e).length}getUnavailableTimeslots(){return this.getTimeSlotsOf(new q)}getUnassignedTimeslots(){const e=[];for(let t=0;t<this.daysPerWeek;t++)for(let l=0;l<this.hoursPerDay;l++)this.isUnassignedOn(t,l)&&e.push({dayOfWeek:t,timeOfDay:l});return e}}function Ge(s,e,t){const l=je(t.schoolClass);Fe(s,e,t,l);const n=De(t.professor);Fe(s,e,t,n)}function Fe(s,e,t,l){const n=l.getSubjectOn(s,e);if((n==null?void 0:n.constructor.name)==q.name)throw new Error("Trying to assign a subject on an unavailable timeslot");n!=null&&He(s,e,n),l.setSubjectOn(s,e,t)}function He(s,e,t){var r,o;if(t.constructor.name==q.name)throw new Error("Trying to remove an unavailable subject");const l=je(t.schoolClass),n=De(t.professor);if(((r=l.getSubjectOn(s,e))==null?void 0:r.id)!=t.id||((o=n.getSubjectOn(s,e))==null?void 0:o.id)!=t.id)throw new Error("Trying to remove a subject from a timeslot that doesn't contain it");l.setSubjectOn(s,e,null),n.setSubjectOn(s,e,null)}function Ye(s,e,t,l=!1){const n=mt(t),r=n.getSubjectOn(s,e);if(l){if((r==null?void 0:r.constructor.name)!=q.name)return}else if(n.isAssignedOn(s,e))throw new Error("Trying to set unavailable on an assigned timeslot");const o=l?null:new q;n.setSubjectOn(s,e,o)}function je(s){const e=s.id;return ve.has(e)||ve.set(e,new gt(Te,Ee)),ve.get(e)}function De(s){const e=s.id;return ke.has(e)||ke.set(e,new gt(Te,Ee)),ke.get(e)}function mt(s){if(s instanceof jt)return je(s);if(s instanceof Ve)return De(s);throw new Error("entity is not a SchoolClass or a Professor")}function Ct(){ve.clear(),ke.clear()}function Ot(s,e){Te=s,Ee=e}function Nt(s){let e,t;const l=s[1].default,n=ee(l,s,s[0],null);return{c(){e=j("colgroup"),n&&n.c()},l(r){e=D(r,"COLGROUP",{});var o=S(e);n&&n.l(o),o.forEach(p)},m(r,o){W(r,e,o),n&&n.m(e,null),t=!0},p(r,[o]){n&&n.p&&(!t||o&1)&&te(n,l,r,r[0],t?se(l,r[0],o,null):le(r[0]),null)},i(r){t||(N(n,r),t=!0)},o(r){U(n,r),t=!1},d(r){r&&p(e),n&&n.d(r)}}}function Ht(s,e,t){let{$$slots:l={},$$scope:n}=e;return Pe("colgroup",!0),s.$$set=r=>{"$$scope"in r&&t(0,n=r.$$scope)},[n,l]}class Ut extends X{constructor(e){super(),$(this,e,Ht,Nt,x,{})}}function Wt(s){let e;const t=s[4].default,l=ee(t,s,s[3],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&8)&&te(l,t,n,n[3],e?se(t,n[3],r,null):le(n[3]),null)},i(n){e||(N(l,n),e=!0)},o(n){U(l,n),e=!1},d(n){l&&l.d(n)}}}function Mt(s){let e,t;const l=s[4].default,n=ee(l,s,s[3],null);return{c(){e=j("div"),n&&n.c(),this.h()},l(r){e=D(r,"DIV",{class:!0});var o=S(e);n&&n.l(o),o.forEach(p),this.h()},h(){I(e,"class",s[1])},m(r,o){W(r,e,o),n&&n.m(e,null),t=!0},p(r,o){n&&n.p&&(!t||o&8)&&te(n,l,r,r[3],t?se(l,r[3],o,null):le(r[3]),null),(!t||o&2)&&I(e,"class",r[1])},i(r){t||(N(n,r),t=!0)},o(r){U(n,r),t=!1},d(r){r&&p(e),n&&n.d(r)}}}function zt(s){let e,t,l,n;const r=[Mt,Wt],o=[];function i(a,c){return a[0]?0:1}return e=i(s),t=o[e]=r[e](s),{c(){t.c(),l=we()},l(a){t.l(a),l=we()},m(a,c){o[e].m(a,c),W(a,l,c),n=!0},p(a,[c]){let u=e;e=i(a),e===u?o[e].p(a,c):(re(),U(o[u],1,1,()=>{o[u]=null}),oe(),t=o[e],t?t.p(a,c):(t=o[e]=r[e](a),t.c()),N(t,1),t.m(l.parentNode,l))},i(a){n||(N(t),n=!0)},o(a){U(t),n=!1},d(a){o[e].d(a),a&&p(l)}}}function Lt(s,e,t){let l,{$$slots:n={},$$scope:r}=e,{class:o=""}=e,{responsive:i=!1}=e;return s.$$set=a=>{"class"in a&&t(2,o=a.class),"responsive"in a&&t(0,i=a.responsive),"$$scope"in a&&t(3,r=a.$$scope)},s.$$.update=()=>{s.$$.dirty&5&&t(1,l=dt(o,{"table-responsive":i===!0,[`table-responsive-${i}`]:typeof i=="string"}))},[i,l,o,r,n]}class Bt extends X{constructor(e){super(),$(this,e,Lt,zt,x,{class:2,responsive:0})}}function At(s){let e,t,l;const n=s[2].default,r=ee(n,s,s[1],null);let o=[s[0]],i={};for(let a=0;a<o.length;a+=1)i=ne(i,o[a]);return{c(){e=j("tfoot"),t=j("tr"),r&&r.c(),this.h()},l(a){e=D(a,"TFOOT",{});var c=S(e);t=D(c,"TR",{});var u=S(t);r&&r.l(u),u.forEach(p),c.forEach(p),this.h()},h(){he(e,i)},m(a,c){W(a,e,c),T(e,t),r&&r.m(t,null),l=!0},p(a,[c]){r&&r.p&&(!l||c&2)&&te(r,n,a,a[1],l?se(n,a[1],c,null):le(a[1]),null),he(e,i=Ce(o,[c&1&&a[0]]))},i(a){l||(N(r,a),l=!0)},o(a){U(r,a),l=!1},d(a){a&&p(e),r&&r.d(a)}}}function yt(s,e,t){const l=[];let n=de(e,l),{$$slots:r={},$$scope:o}=e;return Pe("footer",!0),s.$$set=i=>{e=ne(ne({},e),Oe(i)),t(0,n=de(e,l)),"$$scope"in i&&t(1,o=i.$$scope)},[n,o,r]}class Rt extends X{constructor(e){super(),$(this,e,yt,At,x,{})}}function Gt(s){let e,t,l;const n=s[2].default,r=ee(n,s,s[1],null);let o=[s[0]],i={};for(let a=0;a<o.length;a+=1)i=ne(i,o[a]);return{c(){e=j("thead"),t=j("tr"),r&&r.c(),this.h()},l(a){e=D(a,"THEAD",{});var c=S(e);t=D(c,"TR",{});var u=S(t);r&&r.l(u),u.forEach(p),c.forEach(p),this.h()},h(){he(e,i)},m(a,c){W(a,e,c),T(e,t),r&&r.m(t,null),l=!0},p(a,[c]){r&&r.p&&(!l||c&2)&&te(r,n,a,a[1],l?se(n,a[1],c,null):le(a[1]),null),he(e,i=Ce(o,[c&1&&a[0]]))},i(a){l||(N(r,a),l=!0)},o(a){U(r,a),l=!1},d(a){a&&p(e),r&&r.d(a)}}}function Ft(s,e,t){const l=[];let n=de(e,l),{$$slots:r={},$$scope:o}=e;return Pe("header",!0),s.$$set=i=>{e=ne(ne({},e),Oe(i)),t(0,n=de(e,l)),"$$scope"in i&&t(1,o=i.$$scope)},[n,o,r]}class Yt extends X{constructor(e){super(),$(this,e,Ft,Gt,x,{})}}function qe(s,e,t){const l=s.slice();return l[12]=e[t],l}const qt=s=>({row:s&2}),Ke=s=>({row:s[12]}),Kt=s=>({row:s&2}),Ze=s=>({row:s[12]});function Zt(s){let e;const t=s[10].default,l=ee(t,s,s[11],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&2048)&&te(l,t,n,n[11],e?se(t,n[11],r,null):le(n[11]),null)},i(n){e||(N(l,n),e=!0)},o(n){U(l,n),e=!1},d(n){l&&l.d(n)}}}function Jt(s){let e,t,l,n,r,o,i,a;e=new Ut({props:{$$slots:{default:[Qt]},$$scope:{ctx:s}}}),l=new Yt({props:{$$slots:{default:[Xt]},$$scope:{ctx:s}}});let c=s[1],u=[];for(let f=0;f<c.length;f+=1)u[f]=Je(qe(s,c,f));const d=f=>U(u[f],1,1,()=>{u[f]=null});return i=new Rt({props:{$$slots:{default:[$t]},$$scope:{ctx:s}}}),{c(){K(e.$$.fragment),t=B(),K(l.$$.fragment),n=B(),r=j("tbody");for(let f=0;f<u.length;f+=1)u[f].c();o=B(),K(i.$$.fragment)},l(f){Z(e.$$.fragment,f),t=A(f),Z(l.$$.fragment,f),n=A(f),r=D(f,"TBODY",{});var g=S(r);for(let b=0;b<u.length;b+=1)u[b].l(g);g.forEach(p),o=A(f),Z(i.$$.fragment,f)},m(f,g){J(e,f,g),W(f,t,g),J(l,f,g),W(f,n,g),W(f,r,g);for(let b=0;b<u.length;b+=1)u[b]&&u[b].m(r,null);W(f,o,g),J(i,f,g),a=!0},p(f,g){const b={};g&2048&&(b.$$scope={dirty:g,ctx:f}),e.$set(b);const k={};if(g&2050&&(k.$$scope={dirty:g,ctx:f}),l.$set(k),g&2050){c=f[1];let w;for(w=0;w<c.length;w+=1){const C=qe(f,c,w);u[w]?(u[w].p(C,g),N(u[w],1)):(u[w]=Je(C),u[w].c(),N(u[w],1),u[w].m(r,null))}for(re(),w=c.length;w<u.length;w+=1)d(w);oe()}const _={};g&2048&&(_.$$scope={dirty:g,ctx:f}),i.$set(_)},i(f){if(!a){N(e.$$.fragment,f),N(l.$$.fragment,f);for(let g=0;g<c.length;g+=1)N(u[g]);N(i.$$.fragment,f),a=!0}},o(f){U(e.$$.fragment,f),U(l.$$.fragment,f),u=u.filter(Boolean);for(let g=0;g<u.length;g+=1)U(u[g]);U(i.$$.fragment,f),a=!1},d(f){Q(e,f),f&&p(t),Q(l,f),f&&p(n),f&&p(r),ue(u,f),f&&p(o),Q(i,f)}}}function Qt(s){let e;const t=s[10].default,l=ee(t,s,s[11],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&2048)&&te(l,t,n,n[11],e?se(t,n[11],r,null):le(n[11]),null)},i(n){e||(N(l,n),e=!0)},o(n){U(l,n),e=!1},d(n){l&&l.d(n)}}}function Xt(s){let e;const t=s[10].default,l=ee(t,s,s[11],Ze);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&2050)&&te(l,t,n,n[11],e?se(t,n[11],r,Kt):le(n[11]),Ze)},i(n){e||(N(l,n),e=!0)},o(n){U(l,n),e=!1},d(n){l&&l.d(n)}}}function Je(s){let e,t,l;const n=s[10].default,r=ee(n,s,s[11],Ke);return{c(){e=j("tr"),r&&r.c(),t=B()},l(o){e=D(o,"TR",{});var i=S(e);r&&r.l(i),t=A(i),i.forEach(p)},m(o,i){W(o,e,i),r&&r.m(e,null),T(e,t),l=!0},p(o,i){r&&r.p&&(!l||i&2050)&&te(r,n,o,o[11],l?se(n,o[11],i,qt):le(o[11]),Ke)},i(o){l||(N(r,o),l=!0)},o(o){U(r,o),l=!1},d(o){o&&p(e),r&&r.d(o)}}}function $t(s){let e;const t=s[10].default,l=ee(t,s,s[11],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&2048)&&te(l,t,n,n[11],e?se(t,n[11],r,null):le(n[11]),null)},i(n){e||(N(l,n),e=!0)},o(n){U(l,n),e=!1},d(n){l&&l.d(n)}}}function xt(s){let e,t,l,n;const r=[Jt,Zt],o=[];function i(u,d){return u[1]?0:1}t=i(s),l=o[t]=r[t](s);let a=[s[3],{class:s[2]}],c={};for(let u=0;u<a.length;u+=1)c=ne(c,a[u]);return{c(){e=j("table"),l.c(),this.h()},l(u){e=D(u,"TABLE",{class:!0});var d=S(e);l.l(d),d.forEach(p),this.h()},h(){he(e,c)},m(u,d){W(u,e,d),o[t].m(e,null),n=!0},p(u,d){let f=t;t=i(u),t===f?o[t].p(u,d):(re(),U(o[f],1,1,()=>{o[f]=null}),oe(),l=o[t],l?l.p(u,d):(l=o[t]=r[t](u),l.c()),N(l,1),l.m(e,null)),he(e,c=Ce(a,[d&8&&u[3],(!n||d&4)&&{class:u[2]}]))},i(u){n||(N(l),n=!0)},o(u){U(l),n=!1},d(u){u&&p(e),o[t].d()}}}function el(s){let e,t;return e=new Bt({props:{responsive:s[0],$$slots:{default:[xt]},$$scope:{ctx:s}}}),{c(){K(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,n){J(e,l,n),t=!0},p(l,[n]){const r={};n&1&&(r.responsive=l[0]),n&2062&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){U(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function tl(s,e,t){let l;const n=["class","size","bordered","borderless","striped","hover","responsive","rows"];let r=de(e,n),{$$slots:o={},$$scope:i}=e,{class:a=""}=e,{size:c=""}=e,{bordered:u=!1}=e,{borderless:d=!1}=e,{striped:f=!1}=e,{hover:g=!1}=e,{responsive:b=!1}=e,{rows:k=void 0}=e;return s.$$set=_=>{e=ne(ne({},e),Oe(_)),t(3,r=de(e,n)),"class"in _&&t(4,a=_.class),"size"in _&&t(5,c=_.size),"bordered"in _&&t(6,u=_.bordered),"borderless"in _&&t(7,d=_.borderless),"striped"in _&&t(8,f=_.striped),"hover"in _&&t(9,g=_.hover),"responsive"in _&&t(0,b=_.responsive),"rows"in _&&t(1,k=_.rows),"$$scope"in _&&t(11,i=_.$$scope)},s.$$.update=()=>{s.$$.dirty&1008&&t(2,l=dt(a,"table",c?"table-"+c:!1,u?"table-bordered":!1,d?"table-borderless":!1,f?"table-striped":!1,g?"table-hover":!1))},[b,k,l,r,a,c,u,d,f,g,o,i]}class ll extends X{constructor(e){super(),$(this,e,tl,el,x,{class:4,size:5,bordered:6,borderless:7,striped:8,hover:9,responsive:0,rows:1})}}function sl(s){let e,t=(s[9](s[2])||"")+"",l,n,r,o;return{c(){e=j("section"),l=F(t),this.h()},l(i){e=D(i,"SECTION",{class:!0,style:!0,draggable:!0,id:!0});var a=S(e);l=Y(a,t),a.forEach(p),this.h()},h(){I(e,"class","btn hourItem svelte-xnyhct"),G(e,"user-select","none"),I(e,"draggable",n=s[2]!=null&&s[1]),I(e,"id",s[0]),ce(e,"highlight",s[5]),ce(e,"disabled",!s[1]),G(e,"background-color",s[3])},m(i,a){W(i,e,a),T(e,l),r||(o=[R(e,"dragend",s[11]),R(e,"dragleave",s[14]),R(e,"dragenter",s[15]),R(e,"dragstart",s[16]),R(e,"dragover",s[17])],r=!0)},p(i,a){a&4&&t!==(t=(i[9](i[2])||"")+"")&&fe(l,t),a&6&&n!==(n=i[2]!=null&&i[1])&&I(e,"draggable",n),a&1&&I(e,"id",i[0]),a&32&&ce(e,"highlight",i[5]),a&2&&ce(e,"disabled",!i[1]),a&8&&G(e,"background-color",i[3])},i:Se,o:Se,d(i){i&&p(e),r=!1,_e(o)}}}function nl(s){let e,t;return e=new It({props:{style:"font-size: 30px;",name:"x"}}),{c(){K(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,n){J(e,l,n),t=!0},p:Se,i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){U(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function rl(s){let e,t,l,n,r,o;const i=[nl,sl],a=[];function c(u,d){return u[2]instanceof q||u[4]?0:1}return t=c(s),l=a[t]=i[t](s),{c(){e=j("div"),l.c(),this.h()},l(u){e=D(u,"DIV",{class:!0});var d=S(e);l.l(d),d.forEach(p),this.h()},h(){I(e,"class","text-wrap align-middle hour text-center svelte-xnyhct")},m(u,d){W(u,e,d),a[t].m(e,null),n=!0,r||(o=[R(e,"drop",s[18]),R(e,"click",s[10])],r=!0)},p(u,[d]){let f=t;t=c(u),t===f?a[t].p(u,d):(re(),U(a[f],1,1,()=>{a[f]=null}),oe(),l=a[t],l?l.p(u,d):(l=a[t]=i[t](u),l.c()),N(l,1),l.m(e,null))},i(u){n||(N(l),n=!0)},o(u){U(l),n=!1},d(u){u&&p(e),a[t].d(),r=!1,_e(o)}}}function ol(s,e,t){const l=wt();let{id:n}=e,{draggable:r=!0}=e,{droppable:o=!0}=e,i=!1,{subject:a}=e,{color:c="transparent"}=e,{isProfessorView:u=!1}=e,{unavailable:d=!1}=e;function f(h){o&&h.preventDefault()}function g(h){h.dataTransfer.setData("subject",Dt(a)),h.dataTransfer.setData("id",h.target.id),l("hourDrag",a)}function b(h){h.preventDefault();let z=_t(h.dataTransfer.getData("subject"));l("hourDrop",{subject:z,id:h.dataTransfer.getData("id")}),t(5,i=!1)}function k(h){if(h)return u?`${h.schoolClass} - ${h.abbreviation}`:`${h.professor.name} ${h.professor.surname} - ${h.abbreviation}`}function _(){l("click")}function w(){l("dragend")}const C=()=>t(5,i=!1),V=()=>t(5,i=r),m=h=>g(h),P=h=>f(h),O=h=>b(h);return s.$$set=h=>{"id"in h&&t(0,n=h.id),"draggable"in h&&t(1,r=h.draggable),"droppable"in h&&t(12,o=h.droppable),"subject"in h&&t(2,a=h.subject),"color"in h&&t(3,c=h.color),"isProfessorView"in h&&t(13,u=h.isProfessorView),"unavailable"in h&&t(4,d=h.unavailable)},[n,r,a,c,d,i,f,g,b,k,_,w,o,u,C,V,m,P,O]}class pt extends X{constructor(e){super(),$(this,e,ol,rl,x,{id:0,draggable:1,droppable:12,subject:2,color:3,isProfessorView:13,unavailable:4})}}function Qe(s,e,t){const l=s.slice();return l[9]=e[t][0],l[10]=e[t][1],l}function al(s){let e,t,l,n,r,o=s[9]+"",i,a,c=s[10]+"",u,d,f,g,b;function k(){return s[8](s[9])}return{c(){e=j("tr"),t=j("div"),l=j("td"),n=j("button"),r=F("Level "),i=F(o),a=F(" : "),u=F(c),f=B(),this.h()},l(_){e=D(_,"TR",{class:!0});var w=S(e);t=D(w,"DIV",{style:!0});var C=S(t);l=D(C,"TD",{style:!0,class:!0});var V=S(l);n=D(V,"BUTTON",{class:!0,id:!0});var m=S(n);r=Y(m,"Level "),i=Y(m,o),a=Y(m," : "),u=Y(m,c),m.forEach(p),V.forEach(p),C.forEach(p),f=A(w),w.forEach(p),this.h()},h(){I(n,"class","btn"),I(n,"id",d="label_"+s[9]),G(l,"margin","0"),G(l,"padding","0"),I(l,"class","svelte-1w9ejsp"),G(t,"overflow","scroll"),G(t,"max-width","200px"),G(t,"margin","0"),G(t,"padding","0"),I(e,"class","label svelte-1w9ejsp")},m(_,w){W(_,e,w),T(e,t),T(t,l),T(l,n),T(n,r),T(n,i),T(n,a),T(n,u),T(e,f),g||(b=R(n,"click",k),g=!0)},p(_,w){s=_,w&1&&o!==(o=s[9]+"")&&fe(i,o),w&1&&c!==(c=s[10]+"")&&fe(u,c),w&1&&d!==(d="label_"+s[9])&&I(n,"id",d)},d(_){_&&p(e),g=!1,b()}}}function il(s){let e,t,l,n,r,o=s[9]+"",i,a,c=s[10]+"",u,d,f,g,b;function k(){return s[7](s[9])}return{c(){e=j("tr"),t=j("div"),l=j("td"),n=j("button"),r=F("Level "),i=F(o),a=F(" : "),u=F(c),f=B(),this.h()},l(_){e=D(_,"TR",{class:!0});var w=S(e);t=D(w,"DIV",{style:!0});var C=S(t);l=D(C,"TD",{style:!0,class:!0});var V=S(l);n=D(V,"BUTTON",{class:!0,id:!0});var m=S(n);r=Y(m,"Level "),i=Y(m,o),a=Y(m," : "),u=Y(m,c),m.forEach(p),V.forEach(p),C.forEach(p),f=A(w),w.forEach(p),this.h()},h(){I(n,"class","btn"),I(n,"id",d="label_"+s[9]),G(l,"margin","0"),G(l,"padding","0"),I(l,"class","svelte-1w9ejsp"),G(t,"overflow","scroll"),G(t,"max-width","200px"),G(t,"margin","0"),G(t,"padding","0"),I(e,"class","selected_label svelte-1w9ejsp")},m(_,w){W(_,e,w),T(e,t),T(t,l),T(l,n),T(n,r),T(n,i),T(n,a),T(n,u),T(e,f),g||(b=R(n,"click",k),g=!0)},p(_,w){s=_,w&1&&o!==(o=s[9]+"")&&fe(i,o),w&1&&c!==(c=s[10]+"")&&fe(u,c),w&1&&d!==(d="label_"+s[9])&&I(n,"id",d)},d(_){_&&p(e),g=!1,b()}}}function Xe(s){let e,t;function l(o,i){return i&3&&(e=null),e==null&&(e=parseInt(o[9])===o[1]),e?il:al}let n=l(s,-1),r=n(s);return{c(){r.c(),t=we()},l(o){r.l(o),t=we()},m(o,i){r.m(o,i),W(o,t,i)},p(o,i){n===(n=l(o,i))&&r?r.p(o,i):(r.d(1),r=n(o),r&&(r.c(),r.m(t.parentNode,t)))},d(o){r.d(o),o&&p(t)}}}function ul(s){let e,t,l,n,r,o,i,a,c,u,d,f,g,b,k,_,w=Object.entries(s[0]),C=[];for(let V=0;V<w.length;V+=1)C[V]=Xe(Qe(s,w,V));return{c(){e=j("thead"),t=j("div"),l=j("tr"),n=j("th"),r=j("button"),o=j("i"),i=B(),a=j("tr"),c=j("th"),u=j("button"),d=j("i"),f=B(),g=j("div"),b=j("tbody");for(let V=0;V<C.length;V+=1)C[V].c();this.h()},l(V){e=D(V,"THEAD",{});var m=S(e);t=D(m,"DIV",{class:!0});var P=S(t);l=D(P,"TR",{});var O=S(l);n=D(O,"TH",{class:!0});var h=S(n);r=D(h,"BUTTON",{class:!0});var z=S(r);o=D(z,"I",{class:!0}),S(o).forEach(p),z.forEach(p),h.forEach(p),O.forEach(p),i=A(P),a=D(P,"TR",{});var v=S(a);c=D(v,"TH",{class:!0});var H=S(c);u=D(H,"BUTTON",{class:!0});var E=S(u);d=D(E,"I",{class:!0}),S(d).forEach(p),E.forEach(p),H.forEach(p),v.forEach(p),P.forEach(p),m.forEach(p),f=A(V),g=D(V,"DIV",{});var M=S(g);b=D(M,"TBODY",{});var L=S(b);for(let y=0;y<C.length;y+=1)C[y].l(L);L.forEach(p),M.forEach(p),this.h()},h(){I(o,"class","bi bi-arrow-up"),I(r,"class","btn btn-primary"),I(n,"class","svelte-1w9ejsp"),I(d,"class","bi bi-arrow-down"),I(u,"class","btn btn-primary"),I(c,"class","svelte-1w9ejsp"),I(t,"class","container svelte-1w9ejsp")},m(V,m){W(V,e,m),T(e,t),T(t,l),T(l,n),T(n,r),T(r,o),T(t,i),T(t,a),T(a,c),T(c,u),T(u,d),W(V,f,m),W(V,g,m),T(g,b);for(let P=0;P<C.length;P+=1)C[P]&&C[P].m(b,null);k||(_=[R(r,"click",s[2]),R(u,"click",s[3])],k=!0)},p(V,m){if(m&19){w=Object.entries(V[0]);let P;for(P=0;P<w.length;P+=1){const O=Qe(V,w,P);C[P]?C[P].p(O,m):(C[P]=Xe(O),C[P].c(),C[P].m(b,null))}for(;P<C.length;P+=1)C[P].d(1);C.length=w.length}},d(V){V&&p(e),V&&p(f),V&&p(g),ue(C,V),k=!1,_e(_)}}}function fl(s){let e,t;return e=new ll({props:{style:"margin: 0 0 300px -20px",$$slots:{default:[ul]},$$scope:{ctx:s}}}),{c(){K(e.$$.fragment)},l(l){Z(e.$$.fragment,l)},m(l,n){J(e,l,n),t=!0},p(l,[n]){const r={};n&8195&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){U(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function cl(s,e,t){const l={1:"Weak_1Weak_1Weak_1Weak_1Weak_1",2:"Weak_2",3:"Weak_3",4:"Weak_4",5:"Weak_5"};let{selected_weak:n=1}=e;function r(f){t(1,n=f)}function o(){const f=l[n-1];t(0,l[n-1]=l[n],l),t(0,l[n]=f,l)}function i(){const f=l[n+1];t(0,l[n+1]=l[n],l),t(0,l[n]=f,l)}function a(){n-1>0&&(o(),r(n-1))}function c(){n+1<=Object.keys(l).length&&(i(),r(n+1))}const u=f=>r(parseInt(f)),d=f=>r(parseInt(f));return s.$$set=f=>{"selected_weak"in f&&t(1,n=f.selected_weak)},[l,n,a,c,r,o,i,u,d]}class hl extends X{constructor(e){super(),$(this,e,cl,fl,x,{weak_constrains:0,selected_weak:1,swap_up:5,swap_down:6,bring_weak_up:2,bring_weak_down:3})}get weak_constrains(){return this.$$.ctx[0]}get swap_up(){return this.$$.ctx[5]}get swap_down(){return this.$$.ctx[6]}get bring_weak_up(){return this.$$.ctx[2]}get bring_weak_down(){return this.$$.ctx[3]}}const $e=["#fa968e","#79c9f7","#88f28d","#f0ce78","#f2a477","#c57ff0"],xe=["#540d10","#2a6587","#2e6e31","#a17b1d","#8f461d","#451c5e"];function et(s,e,t){const l=s.slice();return l[25]=e[t],l[27]=t,l}function tt(s,e,t){const l=s.slice();return l[25]=e[t],l[29]=t,l}function lt(s,e,t){const l=s.slice();return l[25]=e[t],l[29]=t,l}function st(s){let e,t,l,n,r,o;function i(){return s[17](s[29])}return{c(){e=j("th"),t=j("input"),n=B(),this.h()},l(a){e=D(a,"TH",{class:!0});var c=S(e);t=D(c,"INPUT",{id:!0,type:!0,class:!0}),n=A(c),c.forEach(p),this.h()},h(){I(t,"id","day_label_"+s[29]),I(t,"type","text"),I(t,"class","input_text svelte-1dzj1ao"),t.value=l=s[6][s[29]]?s[6][s[29]].label:s[10](s[29]),I(e,"class","col-2 svelte-1dzj1ao")},m(a,c){W(a,e,c),T(e,t),T(e,n),r||(o=R(t,"input",i),r=!0)},p(a,c){s=a,c&64&&l!==(l=s[6][s[29]]?s[6][s[29]].label:s[10](s[29]))&&t.value!==l&&(t.value=l)},d(a){a&&p(e),r=!1,o()}}}function nt(s){let e,t,l;function n(){return s[19](s[29],s[27])}function r(){return s[20](s[29],s[27])}function o(...i){return s[21](s[27],s[29],...i)}return t=new pt({props:{unavailable:s[4]!==null&&s[4].values[s[29]][s[27]]instanceof q,isProfessorView:s[1],color:s[9](s[0].getSubjectOn(s[29],s[27])),id:`${s[27]},${s[29]}`,subject:s[0].values[s[29]][s[27]]}}),t.$on("hourDrag",n),t.$on("dragend",s[3]),t.$on("click",r),t.$on("hourDrop",o),{c(){e=j("td"),K(t.$$.fragment),this.h()},l(i){e=D(i,"TD",{class:!0});var a=S(e);Z(t.$$.fragment,a),a.forEach(p),this.h()},h(){I(e,"class","svelte-1dzj1ao")},m(i,a){W(i,e,a),J(t,e,null),l=!0},p(i,a){s=i;const c={};a&16&&(c.unavailable=s[4]!==null&&s[4].values[s[29]][s[27]]instanceof q),a&2&&(c.isProfessorView=s[1]),a&1&&(c.color=s[9](s[0].getSubjectOn(s[29],s[27]))),a&1&&(c.subject=s[0].values[s[29]][s[27]]),t.$set(c)},i(i){l||(N(t.$$.fragment,i),l=!0)},o(i){U(t.$$.fragment,i),l=!1},d(i){i&&p(e),Q(t)}}}function rt(s){let e,t,l,n,r,o,i,a;function c(){return s[18](s[27])}let u={length:s[0].daysPerWeek},d=[];for(let g=0;g<u.length;g+=1)d[g]=nt(tt(s,u,g));const f=g=>U(d[g],1,1,()=>{d[g]=null});return{c(){e=j("tr"),t=j("input"),n=B();for(let g=0;g<d.length;g+=1)d[g].c();r=B(),this.h()},l(g){e=D(g,"TR",{class:!0});var b=S(e);t=D(b,"INPUT",{style:!0,id:!0,type:!0,class:!0}),n=A(b);for(let k=0;k<d.length;k+=1)d[k].l(b);r=A(b),b.forEach(p),this.h()},h(){G(t,"min-width","70px"),I(t,"id","hour_label_"+s[27]),I(t,"type","text"),I(t,"class","input_text svelte-1dzj1ao"),t.value=l=s[5][s[27]]?s[5][s[27]].label:s[12](s[27]),I(e,"class","svelte-1dzj1ao")},m(g,b){W(g,e,b),T(e,t),T(e,n);for(let k=0;k<d.length;k+=1)d[k]&&d[k].m(e,null);T(e,r),o=!0,i||(a=R(t,"input",c),i=!0)},p(g,b){if(s=g,(!o||b&32&&l!==(l=s[5][s[27]]?s[5][s[27]].label:s[12](s[27]))&&t.value!==l)&&(t.value=l),b&927){u={length:s[0].daysPerWeek};let k;for(k=0;k<u.length;k+=1){const _=tt(s,u,k);d[k]?(d[k].p(_,b),N(d[k],1)):(d[k]=nt(_),d[k].c(),N(d[k],1),d[k].m(e,r))}for(re(),k=u.length;k<d.length;k+=1)f(k);oe()}},i(g){if(!o){for(let b=0;b<u.length;b+=1)N(d[b]);o=!0}},o(g){d=d.filter(Boolean);for(let b=0;b<d.length;b+=1)U(d[b]);o=!1},d(g){g&&p(e),ue(d,g),i=!1,a()}}}function dl(s){let e,t,l,n,r,o,i,a,c={length:s[0].daysPerWeek},u=[];for(let b=0;b<c.length;b+=1)u[b]=st(lt(s,c,b));let d={length:s[0].hoursPerDay},f=[];for(let b=0;b<d.length;b+=1)f[b]=rt(et(s,d,b));const g=b=>U(f[b],1,1,()=>{f[b]=null});return{c(){e=j("div"),t=j("table"),l=j("thead"),n=j("tr"),r=j("th"),o=B();for(let b=0;b<u.length;b+=1)u[b].c();i=B();for(let b=0;b<f.length;b+=1)f[b].c();this.h()},l(b){e=D(b,"DIV",{class:!0,style:!0});var k=S(e);t=D(k,"TABLE",{});var _=S(t);l=D(_,"THEAD",{});var w=S(l);n=D(w,"TR",{class:!0});var C=S(n);r=D(C,"TH",{class:!0}),S(r).forEach(p),o=A(C);for(let V=0;V<u.length;V+=1)u[V].l(C);C.forEach(p),w.forEach(p),i=A(_);for(let V=0;V<f.length;V+=1)f[V].l(_);_.forEach(p),k.forEach(p),this.h()},h(){I(r,"class","col-2 svelte-1dzj1ao"),I(n,"class","svelte-1dzj1ao"),I(e,"class","w-100"),G(e,"overflow","auto")},m(b,k){W(b,e,k),T(e,t),T(t,l),T(l,n),T(n,r),T(n,o);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(n,null);T(t,i);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(t,null);a=!0},p(b,[k]){if(k&3137){c={length:b[0].daysPerWeek};let _;for(_=0;_<c.length;_+=1){const w=lt(b,c,_);u[_]?u[_].p(w,k):(u[_]=st(w),u[_].c(),u[_].m(n,null))}for(;_<u.length;_+=1)u[_].d(1);u.length=c.length}if(k&13247){d={length:b[0].hoursPerDay};let _;for(_=0;_<d.length;_+=1){const w=et(b,d,_);f[_]?(f[_].p(w,k),N(f[_],1)):(f[_]=rt(w),f[_].c(),N(f[_],1),f[_].m(t,null))}for(re(),_=d.length;_<f.length;_+=1)g(_);oe()}},i(b){if(!a){for(let k=0;k<d.length;k+=1)N(f[k]);a=!0}},o(b){f=f.filter(Boolean);for(let k=0;k<f.length;k+=1)U(f[k]);a=!1},d(b){b&&p(e),ue(u,b),ue(f,b)}}}function _l(){}function bl(s,e,t){let l,n;Le(s,me,v=>t(5,l=v)),Le(s,pe,v=>t(6,n=v));let{timeTable:r}=e,{professorView:o}=e,{selectedItem:i}=e,{subjectColors:a=new Map}=e,{callback:c}=e,u=null;r.hoursPerDay,r.daysPerWeek,bt.subscribe(v=>{t(0,r)});function d(v){v instanceof Ae&&(t(4,u=mt(o?v.schoolClass:v.professor)),console.log("POG",u.values))}function f(){t(4,u=null),console.log("UNPOG")}function g(v,H){const E=r.getSubjectOn(v,H);E instanceof q?Ye(v,H,i,!0):E==null&&Ye(v,H,i,!1),t(0,r)}function b(v,H,E){const M=r.getSubjectOn(H,v);Ge(H,v,E.subject),f();const L=E.id.split(",");L.length==2&&(He(Number.parseInt(L[1]),Number.parseInt(L[0]),E.subject),M instanceof Ae&&Ge(Number.parseInt(L[1]),Number.parseInt(L[0]),M)),c(),t(0,r)}function k(v){return v==null||v instanceof q?"transparent":a.get(v.id)}function _(v){let H="day "+(v+1);return pe.update(E=>(E[v]=ye.of(v,H),E)),H}function w(v){let H=document.getElementById("day_label_"+v),E=H.value;E.match(/^[a-zA-Z0-9 ]+$/)?(Be(pe,n[v]=ye.of(v,E),n),pe.set,console.log(n)):n[v]?H.value=n[v].label:H.value="day_"+(v+1)}function C(v){let H="hour "+(v+1);return me.update(E=>(E[v]=Re.of(v,H),E)),H}function V(v){let H=document.getElementById("hour_label_"+v),E=H.value;E.match(/^[a-zA-Z0-9: ]+$/)?(Be(me,l[v]=Re.of(v,E),l),me.set,console.log(l)):l[v]?H.value=l[v].label:H.value="hour_"+(v+1)}Tt(_l);const m=v=>w(v),P=v=>V(v),O=(v,H)=>d(r.values[v][H]),h=(v,H)=>g(v,H),z=(v,H,E)=>b(v,H,E.detail);return s.$$set=v=>{"timeTable"in v&&t(0,r=v.timeTable),"professorView"in v&&t(1,o=v.professorView),"selectedItem"in v&&t(14,i=v.selectedItem),"subjectColors"in v&&t(15,a=v.subjectColors),"callback"in v&&t(16,c=v.callback)},[r,o,d,f,u,l,n,g,b,k,_,w,C,V,i,a,c,m,P,O,h,z]}class gl extends X{constructor(e){super(),$(this,e,bl,dl,x,{timeTable:0,professorView:1,selectedItem:14,subjectColors:15,callback:16,onSubjectDrag:2,onSubjectDragEnd:3})}get onSubjectDrag(){return this.$$.ctx[2]}get onSubjectDragEnd(){return this.$$.ctx[3]}}function ot(s,e,t){const l=s.slice();return l[18]=e[t],l[20]=t,l}function at(s){let e,t,l,n,r,o=s[18].hoursPerWeek.value-s[1].getCountOf(s[18])+"",i,a,c;function u(){return s[10](s[18])}return l=new pt({props:{isProfessorView:s[2],color:s[8](s[18]),droppable:!1,draggable:s[9](s[18])>0,id:"prova",subject:s[18]}}),l.$on("hourDrag",u),l.$on("dragend",function(){Et(s[6].onSubjectDragEnd)&&s[6].onSubjectDragEnd.apply(this,arguments)}),l.$on("hourDrop",vl),{c(){e=j("li"),t=j("div"),K(l.$$.fragment),n=B(),r=j("span"),i=F(o),a=B(),this.h()},l(d){e=D(d,"LI",{class:!0});var f=S(e);t=D(f,"DIV",{class:!0});var g=S(t);Z(l.$$.fragment,g),g.forEach(p),n=A(f),r=D(f,"SPAN",{class:!0});var b=S(r);i=Y(b,o),b.forEach(p),a=A(f),f.forEach(p),this.h()},h(){I(t,"class","w-100"),I(r,"class","badge bg-primary rounded-pill ms-2"),I(e,"class","list-group-item d-flex justify-content-between align-items-center")},m(d,f){W(d,e,f),T(e,t),J(l,t,null),T(e,n),T(e,r),T(r,i),T(e,a),c=!0},p(d,f){s=d;const g={};f&4&&(g.isProfessorView=s[2]),f&1&&(g.color=s[8](s[18])),f&1&&(g.draggable=s[9](s[18])>0),f&1&&(g.subject=s[18]),l.$set(g),(!c||f&3)&&o!==(o=s[18].hoursPerWeek.value-s[1].getCountOf(s[18])+"")&&fe(i,o)},i(d){c||(N(l.$$.fragment,d),c=!0)},o(d){U(l.$$.fragment,d),c=!1},d(d){d&&p(e),Q(l)}}}function ml(s){let e,t,l,n,r,o,i,a,c,u,d,f,g,b,k,_,w,C,V,m,P,O=s[0],h=[];for(let E=0;E<O.length;E+=1)h[E]=at(ot(s,O,E));const z=E=>U(h[E],1,1,()=>{h[E]=null});u=new hl({});function v(E){s[12](E)}let H={professorView:s[2],selectedItem:s[3],subjectColors:s[4],callback:s[5]};return s[1]!==void 0&&(H.timeTable=s[1]),g=new gl({props:H}),Ne.push(()=>ct(g,"timeTable",v)),s[13](g),{c(){e=j("head"),t=j("link"),l=B(),n=j("div"),r=j("div"),o=j("div"),i=j("ul");for(let E=0;E<h.length;E+=1)h[E].c();a=B(),c=j("div"),K(u.$$.fragment),d=B(),f=j("div"),K(g.$$.fragment),k=B(),_=j("div"),w=j("button"),C=F("valida orario"),this.h()},l(E){e=D(E,"HEAD",{});var M=S(e);t=D(M,"LINK",{rel:!0,href:!0}),M.forEach(p),l=A(E),n=D(E,"DIV",{class:!0});var L=S(n);r=D(L,"DIV",{class:!0});var y=S(r);o=D(y,"DIV",{class:!0});var ae=S(o);i=D(ae,"UL",{class:!0});var Ue=S(i);for(let Ie=0;Ie<h.length;Ie+=1)h[Ie].l(Ue);Ue.forEach(p),a=A(ae),c=D(ae,"DIV",{style:!0});var We=S(c);Z(u.$$.fragment,We),We.forEach(p),ae.forEach(p),d=A(y),f=D(y,"DIV",{class:!0});var be=S(f);Z(g.$$.fragment,be),k=A(be),_=D(be,"DIV",{class:!0});var Me=S(_);w=D(Me,"BUTTON",{type:!0,class:!0});var ze=S(w);C=Y(ze,"valida orario"),ze.forEach(p),Me.forEach(p),be.forEach(p),y.forEach(p),L.forEach(p),this.h()},h(){I(t,"rel","stylesheet"),I(t,"href","https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"),I(i,"class","list-group me-1"),G(c,"overflow","scroll"),I(o,"class","overflow-auto vh-100 row col-2"),I(w,"type","button"),I(w,"class","btn btn-primary btn-lg w-100"),I(_,"class","d-flex justify-content-center my-4"),I(f,"class","col-10"),I(r,"class","d-flex"),I(n,"class","container-fluid")},m(E,M){W(E,e,M),T(e,t),W(E,l,M),W(E,n,M),T(n,r),T(r,o),T(o,i);for(let L=0;L<h.length;L+=1)h[L]&&h[L].m(i,null);T(o,a),T(o,c),J(u,c,null),T(r,d),T(r,f),J(g,f,null),T(f,k),T(f,_),T(_,w),T(w,C),V=!0,m||(P=[R(i,"dragover",kl),R(i,"drop",s[11]),R(w,"click",s[14])],m=!0)},p(E,[M]){if(M&839){O=E[0];let y;for(y=0;y<O.length;y+=1){const ae=ot(E,O,y);h[y]?(h[y].p(ae,M),N(h[y],1)):(h[y]=at(ae),h[y].c(),N(h[y],1),h[y].m(i,null))}for(re(),y=O.length;y<h.length;y+=1)z(y);oe()}const L={};M&4&&(L.professorView=E[2]),M&8&&(L.selectedItem=E[3]),M&16&&(L.subjectColors=E[4]),!b&&M&2&&(b=!0,L.timeTable=E[1],ht(()=>b=!1)),g.$set(L)},i(E){if(!V){for(let M=0;M<O.length;M+=1)N(h[M]);N(u.$$.fragment,E),N(g.$$.fragment,E),V=!0}},o(E){h=h.filter(Boolean);for(let M=0;M<h.length;M+=1)U(h[M]);U(u.$$.fragment,E),U(g.$$.fragment,E),V=!1},d(E){E&&p(e),E&&p(l),E&&p(n),ue(h,E),Q(u),s[13](null),Q(g),m=!1,_e(P)}}}function pl(){alert("Work in progess...")}const vl=s=>{},kl=s=>s.preventDefault();function wl(s,e,t){let{grid:l}=e,{sidebar:n}=e,{professorView:r}=e,{selectedItem:o}=e,i,a=$e,{subjectColors:c=new Map}=e;const u=()=>{let m=0;c.clear(),n.forEach(P=>c.set(P.id,a[m++%a.length]))};bt.subscribe(m=>{m=="light"?a=$e:(m=="dark",a=xe);let P=0;c.clear(),n.forEach(O=>c.set(O.id,a[P++%a.length])),b()});function d(m){const P=_t(m.dataTransfer.getData("subject")),h=m.dataTransfer.getData("id").split(",");He(Number.parseInt(h[1]),Number.parseInt(h[0]),P),t(1,l),t(0,n)}function f(m){return m==null||m instanceof q?"transparent":c.get(m.id)}function g(m){return m.hoursPerWeek.value-l.getCountOf(m)}function b(){t(0,n)}const k=m=>i.onSubjectDrag(m),_=m=>d(m);function w(m){l=m,t(1,l)}function C(m){Ne[m?"unshift":"push"](()=>{i=m,t(6,i)})}const V=m=>pl();return s.$$set=m=>{"grid"in m&&t(1,l=m.grid),"sidebar"in m&&t(0,n=m.sidebar),"professorView"in m&&t(2,r=m.professorView),"selectedItem"in m&&t(3,o=m.selectedItem),"subjectColors"in m&&t(4,c=m.subjectColors)},s.$$.update=()=>{s.$$.dirty&1&&n&&u()},[n,l,r,o,c,b,i,d,f,g,k,_,w,C,V]}class Tl extends X{constructor(e){super(),$(this,e,wl,ml,x,{grid:1,sidebar:0,professorView:2,selectedItem:3,subjectColors:4,refresh:5})}get refresh(){return this.$$.ctx[5]}}function it(s,e,t){const l=s.slice();return l[17]=e[t],l}function ut(s){let e,t,l=s[17].toString()+"",n,r,o,i;function a(){return s[14](s[17])}return{c(){e=j("li"),t=j("a"),n=F(l),r=B(),this.h()},l(c){e=D(c,"LI",{class:!0});var u=S(e);t=D(u,"A",{class:!0,href:!0});var d=S(t);n=Y(d,l),d.forEach(p),r=A(u),u.forEach(p),this.h()},h(){I(t,"class","nav-link"),I(t,"href","#"),ce(t,"active",s[17]==s[3]),I(e,"class","nav-item")},m(c,u){W(c,e,u),T(e,t),T(t,n),T(e,r),o||(i=R(t,"click",a),o=!0)},p(c,u){s=c,u&100&&l!==(l=s[17].toString()+"")&&fe(n,l),u&108&&ce(t,"active",s[17]==s[3])},d(c){c&&p(e),o=!1,i()}}}function ft(s){let e,t,l;function n(o){s[15](o)}let r={selectedItem:s[3],professorView:s[2],sidebar:s[7]};return s[4]!==void 0&&(r.grid=s[4]),e=new Tl({props:r}),Ne.push(()=>ct(e,"grid",n)),{c(){K(e.$$.fragment)},l(o){Z(e.$$.fragment,o)},m(o,i){J(e,o,i),l=!0},p(o,i){const a={};i&8&&(a.selectedItem=o[3]),i&4&&(a.professorView=o[2]),i&128&&(a.sidebar=o[7]),!t&&i&16&&(t=!0,a.grid=o[4],ht(()=>t=!1)),e.$set(a)},i(o){l||(N(e.$$.fragment,o),l=!0)},o(o){U(e.$$.fragment,o),l=!1},d(o){Q(e,o)}}}function El(s){let e,t,l,n,r,o,i,a,c,u,d,f,g,b,k,_,w,C,V,m=s[2]?s[6]:s[5],P=[];for(let h=0;h<m.length;h+=1)P[h]=ut(it(s,m,h));let O=s[4]&&s[3]&&ft(s);return{c(){e=j("input"),t=B(),l=j("input"),n=B(),r=j("button"),o=F("Update Size"),i=B(),a=j("div"),c=j("div"),u=j("input"),d=B(),f=j("label"),g=F("Professor View"),b=B(),k=j("ul");for(let h=0;h<P.length;h+=1)P[h].c();_=B(),O&&O.c(),this.h()},l(h){e=D(h,"INPUT",{placeholder:!0}),t=A(h),l=D(h,"INPUT",{placeholder:!0}),n=A(h),r=D(h,"BUTTON",{class:!0});var z=S(r);o=Y(z,"Update Size"),z.forEach(p),i=A(h),a=D(h,"DIV",{class:!0});var v=S(a);c=D(v,"DIV",{class:!0});var H=S(c);u=D(H,"INPUT",{class:!0,type:!0,id:!0}),d=A(H),f=D(H,"LABEL",{class:!0,for:!0});var E=S(f);g=Y(E,"Professor View"),E.forEach(p),H.forEach(p),b=A(v),k=D(v,"UL",{class:!0});var M=S(k);for(let L=0;L<P.length;L+=1)P[L].l(M);M.forEach(p),_=A(v),O&&O.l(v),v.forEach(p),this.h()},h(){I(e,"placeholder","days"),I(l,"placeholder","hours"),I(r,"class","btn"),I(u,"class","form-check-input"),I(u,"type","checkbox"),I(u,"id","flexSwitchCheckChecked"),u.checked=s[2],I(f,"class","form-check-label"),I(f,"for","flexSwitchCheckChecked"),I(c,"class","form-check form-switch"),I(k,"class","nav nav-tabs"),I(a,"class","m-3")},m(h,z){W(h,e,z),ge(e,s[0]),W(h,t,z),W(h,l,z),ge(l,s[1]),W(h,n,z),W(h,r,z),T(r,o),W(h,i,z),W(h,a,z),T(a,c),T(c,u),T(c,d),T(c,f),T(f,g),T(a,b),T(a,k);for(let v=0;v<P.length;v+=1)P[v]&&P[v].m(k,null);T(a,_),O&&O.m(a,null),w=!0,C||(V=[R(e,"input",s[11]),R(l,"input",s[12]),R(r,"click",s[13]),R(u,"click",s[9])],C=!0)},p(h,[z]){if(z&1&&e.value!==h[0]&&ge(e,h[0]),z&2&&l.value!==h[1]&&ge(l,h[1]),(!w||z&4)&&(u.checked=h[2]),z&364){m=h[2]?h[6]:h[5];let v;for(v=0;v<m.length;v+=1){const H=it(h,m,v);P[v]?P[v].p(H,z):(P[v]=ut(H),P[v].c(),P[v].m(k,null))}for(;v<P.length;v+=1)P[v].d(1);P.length=m.length}h[4]&&h[3]?O?(O.p(h,z),z&24&&N(O,1)):(O=ft(h),O.c(),N(O,1),O.m(a,null)):O&&(re(),U(O,1,1,()=>{O=null}),oe())},i(h){w||(N(O),w=!0)},o(h){U(O),w=!1},d(h){h&&p(e),h&&p(t),h&&p(l),h&&p(n),h&&p(r),h&&p(i),h&&p(a),ue(P,h),O&&O.d(),C=!1,_e(V)}}}function jl(s,e,t){let l=[],n=[],r=[],o=[],{inputDays:i=Te.toString()}=e,{inputHours:a=Ee.toString()}=e;St.subscribe(m=>t(5,n=m)),Vt.subscribe(m=>{l=m});let{professorView:c=!1}=e,{selectedItem:u=null}=e,{currentTimeTable:d=null}=e;Pt.subscribe(m=>{t(6,r=m)});function f(m){let P=m instanceof Ve?De(m):je(m);t(4,d=P),console.log("PORCO",d.values.length),t(3,u=m),m instanceof Ve?t(7,o=l.filter(O=>O.professor.id==m.id)):t(7,o=l.filter(O=>O.schoolClass.id==m.id))}function g(){t(2,c=!c),f(c?r[0]:n[0])}function b(){const m=new RegExp("^[0-9]+$");i.match(m)&&a.match(m)?(Ot(parseInt(i),parseInt(a)),Ct(),u!=null&&f(u)):alert("Invalid Grid Size")}function k(){i=this.value,t(0,i)}function _(){a=this.value,t(1,a)}const w=m=>{b()},C=m=>f(m);function V(m){d=m,t(4,d)}return s.$$set=m=>{"inputDays"in m&&t(0,i=m.inputDays),"inputHours"in m&&t(1,a=m.inputHours),"professorView"in m&&t(2,c=m.professorView),"selectedItem"in m&&t(3,u=m.selectedItem),"currentTimeTable"in m&&t(4,d=m.currentTimeTable)},[i,a,c,u,d,n,r,o,f,g,b,k,_,w,C,V]}class Vl extends X{constructor(e){super(),$(this,e,jl,El,x,{inputDays:0,inputHours:1,professorView:2,selectedItem:3,currentTimeTable:4})}}export{Vl as component};
